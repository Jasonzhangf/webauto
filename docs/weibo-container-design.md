# å¾®åšé¡µé¢å®¹å™¨è®¾è®¡è“å›¾

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬æ–‡æ¡£å®šä¹‰äº†å¾®åšé¡µé¢è‡ªåŠ¨åŒ–åˆ†æçš„å®Œæ•´å®¹å™¨è®¾è®¡æ–¹æ¡ˆã€‚

## ğŸ—ï¸ æ•´ä½“æ¶æ„

### è®¾è®¡åŸåˆ™
- å±‚æ¬¡åŒ–ï¼šæ¸…æ™°çš„çˆ¶å­å…³ç³»
- æ¨¡å—åŒ–ï¼šæ¯ä¸ªå®¹å™¨ç‹¬ç«‹å°è£…
- å®¹é”™æ€§ï¼šéƒ¨åˆ†å®¹å™¨ç¼ºå¤±ä¸å½±å“æ•´ä½“
- é«˜æ•ˆæ€§ï¼šä¼˜å…ˆåŠ è½½é‡è¦å†…å®¹
- å®‰å…¨æ€§ï¼šå†…ç½®é˜²åæœºå™¨äººä¿æŠ¤

### æ ¸å¿ƒæµç¨‹
å¾®åšä¸»é¡µ â†’ æ‰¹é‡é“¾æ¥å‘ç° â†’ é€ä¸ªå¸–å­åˆ†æ â†’ æ·±åº¦æ•°æ®æå–

## ğŸ  ä¸»é¡µå®¹å™¨å±‚æ¬¡è®¾è®¡

### æ ¹å®¹å™¨ï¼šweibo-homepage
- **ç”¨é€”**: å¾®åšä¸»é¡µæ•´ä½“å®¹å™¨
- **æ£€æµ‹**: URLåŒ¹é… weibo.com æˆ– bodyåŒ…å«å¾®åšæ ‡è¯†

### å­å®¹å™¨ç»“æ„
```
weibo-homepage
â”œâ”€â”€ navigation (ä¸»å¯¼èˆªæ )
â”‚   â”œâ”€â”€ logo (å¾®åšlogo)
â”‚   â”œâ”€â”€ search-bar (æœç´¢æ¡†)
â”‚   â””â”€â”€ user-menu (ç”¨æˆ·èœå•)
â”œâ”€â”€ sidebar (ä¾§è¾¹æ )
â”‚   â”œâ”€â”€ hot-topics (çƒ­é—¨è¯é¢˜)
â”‚   â”œâ”€â”€ recommendations (æ¨èç”¨æˆ·)
â”‚   â””â”€â”€ trending (çƒ­æœæ¦œ)
â””â”€â”€ main-content (ä¸»å†…å®¹åŒº)
    â””â”€â”€ feed-container (ä¿¡æ¯æµå®¹å™¨)
        â”œâ”€â”€ weibo-card-* (å¾®åšå¡ç‰‡é›†åˆ)
        â”œâ”€â”€ load-more-trigger (åŠ è½½æ›´å¤šè§¦å‘å™¨)
        â””â”€â”€ infinite-scroll-detector (æ— é™æ»šåŠ¨æ£€æµ‹)
```

### å…³é”®é€‰æ‹©å™¨å®šä¹‰
```typescript
const WEIBO_HOME_SELECTORS = {
  root: 'body',
  navigation: '.gn_header',
  sidebar: '.gn_sidebar',
  mainContent: '.WB_main',
  feed: '[data-e2e="feed"]',
  card: '[data-e2e="feed-item"]',
  loadMore: '.more_loading',
  scroller: '.scroll_container'
}
```

## ğŸ“„ å¸–å­è¯¦æƒ…å®¹å™¨è®¾è®¡

### æ ¹å®¹å™¨ï¼šweibo-post
- **ç”¨é€”**: å•æ¡å¾®åšå¸–å­è¯¦ç»†é¡µé¢
- **æ£€æµ‹**: URLåŒ…å« /status/ æˆ– /p/ æ¨¡å¼

### å®Œæ•´å®¹å™¨å±‚æ¬¡
```
weibo-post
â”œâ”€â”€ header (å¸–å­å¤´éƒ¨)
â”‚   â”œâ”€â”€ author-info (ä½œè€…ä¿¡æ¯åŒº)
â”‚   â”‚   â”œâ”€â”€ avatar (å¤´åƒ)
â”‚   â”‚   â”œâ”€â”€ username (ç”¨æˆ·å)
â”‚   â”‚   â””â”€â”€ verified (è®¤è¯æ ‡è¯†)
â”‚   â””â”€â”€ post-meta (å‘å¸ƒä¿¡æ¯)
â”‚       â”œâ”€â”€ publish-time (å‘å¸ƒæ—¶é—´)
â”‚       â”œâ”€â”€ source (å‘å¸ƒæ¥æº)
â”‚       â””â”€â”€ location (åœ°ç†ä½ç½®)
â”œâ”€â”€ content (å†…å®¹åŒºåŸŸ)
â”‚   â”œâ”€â”€ text-content (æ–‡æœ¬å†…å®¹)
â”‚   â”‚   â””â”€â”€ hashtags (è¯é¢˜æ ‡ç­¾)
â”‚   â”œâ”€â”€ media-grid (åª’ä½“ç½‘æ ¼)
â”‚   â”‚   â”œâ”€â”€ image-* (å›¾ç‰‡å…ƒç´ )
â”‚   â”‚   â”œâ”€â”€ video-* (è§†é¢‘å…ƒç´ )
â”‚   â”‚   â””â”€â”€ article-* (æ–‡ç« å¡ç‰‡)
â”‚   â””â”€â”€ embedded-links (åµŒå…¥é“¾æ¥)
â”‚       â”œâ”€â”€ quoted-post (å¼•ç”¨å¸–å­)
â”‚       â””â”€â”€ external-link (å¤–éƒ¨é“¾æ¥)
â”œâ”€â”€ engagement-bar (äº’åŠ¨æ )
â”‚   â”œâ”€â”€ repost (è½¬å‘æŒ‰é’®)
â”‚   â”œâ”€â”€ comment (è¯„è®ºæŒ‰é’®)
â”‚   â””â”€â”€ like (ç‚¹èµæŒ‰é’®)
â””â”€â”€ comments-section (è¯„è®ºåŒº)
    â”œâ”€â”€ comments-header (è¯„è®ºå¤´éƒ¨)
    â”‚   â”œâ”€â”€ sort-options (æ’åºé€‰é¡¹)
    â”‚   â””â”€â”€ comment-count (è¯„è®ºæ•°é‡)
    â”œâ”€â”€ comment-list (è¯„è®ºåˆ—è¡¨)
    â”‚   â””â”€â”€ comment-* (å•æ¡è¯„è®º)
    â”‚       â”œâ”€â”€ comment-author (è¯„è®ºä½œè€…)
    â”‚       â”œâ”€â”€ comment-content (è¯„è®ºå†…å®¹)
    â”‚       â”œâ”€â”€ comment-time (è¯„è®ºæ—¶é—´)
    â”‚       â”œâ”€â”€ comment-likes (ç‚¹èµæ•°)
    â”‚       â””â”€â”€ comment-replies (å›å¤åŒºåŸŸ)
    â”‚           â””â”€â”€ reply-* (å•æ¡å›å¤)
    â””â”€â”€ load-more-comments (åŠ è½½æ›´å¤šè¯„è®º)
```

### å¸–å­é€‰æ‹©å™¨é…ç½®
```typescript
const WEIBO_POST_SELECTORS = {
  root: '[data-e2e="content"]',
  author: {
    avatar: '[data-e2e="avatar"]',
    name: '[data-e2e="author-name"]',
    verified: '[data-e2e="verified"]'
  },
  content: {
    text: '[data-e2e="text"]',
    images: '[data-e2e="image-grid"] img',
    video: '[data-e2e="video-player"]',
    article: '[data-e2e="article-card"]'
  },
  engagement: {
    repost: '[data-e2e="repost-btn"]',
    comment: '[data-e2e="comment-btn"]',
    like: '[data-e2e="like-btn"]'
  },
  comments: {
    container: '[data-e2e="comment-list"]',
    item: '[data-e2e="comment-item"]',
    content: '[data-e2e="comment-text"]',
    loadMore: '[data-e2e="comment-more"]'
  }
}
```

## ğŸ”„ æ— é™æ»šåŠ¨æ£€æµ‹ç­–ç•¥

### æ£€æµ‹æœºåˆ¶
#### 1. ä¸»é¡µä¿¡æ¯æµæ»šåŠ¨
- **è§¦å‘æ¡ä»¶**: æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨80%ä½ç½®
- **DOMç›‘å¬**: ç›‘å¬feedå®¹å™¨å†…æ–°å¢çš„weibo-cardå…ƒç´ 
- **æ—¶é—´æ£€æµ‹**: é—´éš”2-5ç§’æ£€æŸ¥æ–°å†…å®¹åŠ è½½
- **å¤±æ•ˆå¤„ç†**: è¿ç»­3æ¬¡æ— æ–°å†…å®¹åˆ™åœæ­¢æ»šåŠ¨

#### 2. è¯„è®ºåŒºåŸŸæ»šåŠ¨
- **åŠ è½½æ›´å¤š**: ç‚¹å‡»"æŸ¥çœ‹æ›´å¤šè¯„è®º"æŒ‰é’®
- **è‡ªåŠ¨å±•å¼€**: é€å±‚å±•å¼€å›å¤å†…å®¹
- **æ·±åº¦é™åˆ¶**: æœ€å¤šå±•å¼€5å±‚å›å¤é“¾
- **é¢‘ç‡æ§åˆ¶**: æ¯æ¬¡å±•å¼€é—´éš”1-3ç§’

### æ»šåŠ¨å®ç°ç­–ç•¥
```typescript
interface ScrollStrategy {
  // ä¸»é¡µæ»šåŠ¨
  homepage: {
    scrollInterval: [2000, 5000], // 2-5ç§’éšæœºé—´éš”
    scrollThreshold: 0.8,        // æ»šåŠ¨åˆ°80%ä½ç½®
    maxAttempts: 10,             // æœ€å¤§å°è¯•æ¬¡æ•°
    waitTimeout: 30000,          // 30ç§’è¶…æ—¶
  },
  // è¯„è®ºæ»šåŠ¨
  comments: {
    expandDelay: [1000, 3000],   // 1-3ç§’éšæœºå»¶è¿Ÿ
    maxDepth: 5,                // æœ€å¤§å›å¤æ·±åº¦
    batchSize: 5,               // æ¯æ‰¹åŠ è½½è¯„è®ºæ•°
    retryCount: 3               // é‡è¯•æ¬¡æ•°
  }
}
```

### å…³é”®æ£€æµ‹ç‚¹
- **é«˜åº¦å˜åŒ–**: `document.documentElement.scrollHeight` å¢åŠ 
- **å…ƒç´ æ–°å¢**: MutationObserverç›‘å¬DOMå˜åŒ–
- **åŠ è½½æŒ‡ç¤ºå™¨**: æ£€æµ‹loadingåŠ¨ç”»æˆ–æ–‡å­—
- **æŒ‰é’®å‡ºç°**: "åŠ è½½æ›´å¤š"æŒ‰é’®çš„æ˜¾ç¤º/éšè—
- **å†…å®¹é‡å¤**: é¿å…é‡å¤åŠ è½½ç›¸åŒå†…å®¹

### é”™è¯¯å¤„ç†
- **ç½‘ç»œè¶…æ—¶**: è‡ªåŠ¨é‡è¯•æœºåˆ¶
- **é¡µé¢è·³è½¬**: æ£€æµ‹URLå˜åŒ–é‡æ–°åˆå§‹åŒ–
- **åçˆ¬è§¦å‘**: æš‚åœå¹¶å¢åŠ å»¶è¿Ÿæ—¶é—´
- **å†…å®¹å¼‚å¸¸**: è®°å½•é”™è¯¯å¹¶è·³è¿‡å½“å‰é¡¹ç›®
```

## ğŸ›¡ï¸ é˜²åæœºå™¨äººä¿æŠ¤æœºåˆ¶

### æ ¸å¿ƒä¿æŠ¤ç­–ç•¥
#### 1. æ—¶é—´é—´éš”æ§åˆ¶
- **æ»šåŠ¨æ“ä½œ**: 2-5ç§’éšæœºé—´éš”ï¼Œæ¨¡æ‹Ÿäººç±»é˜…è¯»é€Ÿåº¦
- **ç‚¹å‡»æ“ä½œ**: 1-3ç§’éšæœºå»¶è¿Ÿï¼Œé¿å…æœºå™¨åŒ–æ“ä½œ
- **é¡µé¢åˆ‡æ¢**: 3-8ç§’é—´éš”ï¼Œæ¨¡æ‹Ÿé¡µé¢æµè§ˆä¹ æƒ¯
- **æ•°æ®æå–**: 500ms-2ç§’å¤„ç†é—´éš”ï¼Œæ¨¡æ‹Ÿæ€è€ƒæ—¶é—´

#### 2. è¡Œä¸ºæ¨¡æ‹Ÿ
```typescript
interface HumanBehavior {
  // é¼ æ ‡ç§»åŠ¨
  mouseMovement: {
    randomMoves: true,          // éšæœºç§»åŠ¨é¼ æ ‡
    scrollVariation: [0.7, 1.3], // æ»šåŠ¨é€Ÿåº¦å˜åŒ–
    pauseProbability: 0.15      // 15%æ¦‚ç‡æš‚åœ
  },
  // è§†çª—æ“ä½œ
  viewport: {
    resizeRandom: true,         // éšæœºè°ƒæ•´çª—å£å¤§å°
    focusChange: true,          // åˆ‡æ¢çª—å£ç„¦ç‚¹
    scrollBack: true            // å¶å°”å›æ»šæŸ¥çœ‹
  },
  // é”®ç›˜æ´»åŠ¨
  keyboard: {
    randomKeys: true,           // éšæœºæŒ‰é”®
    searchSimulate: true        // æ¨¡æ‹Ÿæœç´¢è¡Œä¸º
  }
}
```

#### 3. è¯·æ±‚é¢‘ç‡é™åˆ¶
- **å¹¶å‘é™åˆ¶**: æœ€å¤šåŒæ—¶å¤„ç†2-3ä¸ªå¸–å­
- **è¯·æ±‚é—´éš”**: åŒä¸€IPé—´éš”è‡³å°‘30ç§’
- **å¤±è´¥é€€é¿**: æŒ‡æ•°é€€é¿ç­–ç•¥ï¼Œæœ€é•¿å»¶è¿Ÿ5åˆ†é’Ÿ
- **æ—¶æ®µæ§åˆ¶**: é¿å¼€é«˜å³°æ—¶æ®µ(19:00-23:00)

#### 4. æµè§ˆå™¨æŒ‡çº¹ç®¡ç†
```typescript
interface BrowserFingerprint {
  // User-Agentè½®æ¢
  userAgent: {
    rotation: true,
    commonBrowsers: ['Chrome', 'Firefox', 'Safari'],
    versionRange: ['90-100', '85-95', '14-16']
  },
  // è§†çª—å¤§å°
  viewport: {
    common: ['1920x1080', '1366x768', '1440x900'],
    randomOffset: [-100, 100]
  },
  // æ—¶åŒºå’Œè¯­è¨€
  locale: {
    timezone: ['Asia/Shanghai', 'Asia/Beijing'],
    language: ['zh-CN', 'zh']
  }
}
```

### æ£€æµ‹ä¸åº”å¯¹
#### åçˆ¬æ£€æµ‹ä¿¡å·
- **éªŒè¯ç å‡ºç°**: è‡ªåŠ¨æš‚åœç­‰å¾…ç”¨æˆ·å¤„ç†
- **IPå°ç¦**: åˆ‡æ¢ä»£ç†æˆ–å»¶é•¿ç­‰å¾…æ—¶é—´
- **è´¦å·å¼‚å¸¸**: æš‚åœæ“ä½œå¹¶å‘é€é€šçŸ¥
- **é¡µé¢å¼‚å¸¸**: è®°å½•é”™è¯¯å¹¶è°ƒæ•´ç­–ç•¥

#### è‡ªé€‚åº”è°ƒæ•´
```typescript
interface AdaptiveControl {
  // åŠ¨æ€å»¶è¿Ÿ
  delayAdjustment: {
    baseDelay: 3000,
    maxDelay: 300000,  // 5åˆ†é’Ÿ
    increaseRate: 1.5,
    decreaseRate: 0.8
  },
  // æˆåŠŸç‡ç›‘æ§
  successRate: {
    threshold: 0.8,     // 80%æˆåŠŸç‡
    windowSize: 20,     // 20æ¬¡æ“ä½œçª—å£
    adjustmentStep: 1000 // è°ƒæ•´æ­¥é•¿
  }
}
```

### å®‰å…¨æœ€ä½³å®è·µ
- **Cookieç®¡ç†**: å®‰å…¨å­˜å‚¨å’Œè½®æ¢
- **ä»£ç†æ± **: å¤šåœ°åŒºIPè½®æ¢
- **æ—¥å¿—è®°å½•**: è¯¦ç»†çš„æ“ä½œæ—¥å¿—ç”¨äºåˆ†æ
- **å¼‚å¸¸ç›‘æ§**: å®æ—¶ç›‘æ§ç³»ç»ŸçŠ¶æ€
- **æ•°æ®åŠ å¯†**: æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨
```

## ğŸ“Š æ•°æ®æå–ç­–ç•¥

### æå–ä¼˜å…ˆçº§
#### 1. æ ¸å¿ƒæ•°æ® (æœ€é«˜ä¼˜å…ˆçº§)
- **å¸–å­ID**: å”¯ä¸€æ ‡è¯†ç¬¦
- **ä½œè€…ä¿¡æ¯**: ç”¨æˆ·åã€IDã€è®¤è¯çŠ¶æ€
- **å‘å¸ƒæ—¶é—´**: ç²¾ç¡®æ—¶é—´æˆ³
- **æ–‡æœ¬å†…å®¹**: å®Œæ•´å¸–å­å†…å®¹
- **äº’åŠ¨æ•°æ®**: è½¬å‘ã€è¯„è®ºã€ç‚¹èµæ•°é‡

#### 2. åª’ä½“å†…å®¹ (é«˜ä¼˜å…ˆçº§)
- **å›¾ç‰‡**: é«˜æ¸…åŸå›¾é“¾æ¥å’Œç¼©ç•¥å›¾
- **è§†é¢‘**: è§†é¢‘åœ°å€ã€æ—¶é•¿ã€å°é¢å›¾
- **æ–‡ç« **: æ–‡ç« æ ‡é¢˜ã€é“¾æ¥ã€æ‘˜è¦
- **é“¾æ¥**: å†…åµŒé“¾æ¥å’Œå¼•ç”¨å†…å®¹

#### 3. è¯„è®ºæ•°æ® (ä¸­ç­‰ä¼˜å…ˆçº§)
- **ä¸»è¯„è®º**: è¯„è®ºå†…å®¹ã€ä½œè€…ã€æ—¶é—´
- **å›å¤é“¾**: å¤šå±‚å›å¤çš„å®Œæ•´ç»“æ„
- **äº’åŠ¨æ•°æ®**: è¯„è®ºçš„ç‚¹èµã€å›å¤æ•°
- **æ—¶é—´æ’åº**: è¯„è®ºçš„æ—¶é—´åˆ†å¸ƒ

#### 4. æ‰©å±•æ•°æ® (ä½ä¼˜å…ˆçº§)
- **è¯é¢˜æ ‡ç­¾**: ç›¸å…³è¯é¢˜å’Œæ ‡ç­¾
- **åœ°ç†ä½ç½®**: å‘å¸ƒåœ°ç‚¹ä¿¡æ¯
- **è®¾å¤‡ä¿¡æ¯**: å‘å¸ƒå®¢æˆ·ç«¯ç±»å‹
- **è½¬å‘é“¾**: è½¬å‘è·¯å¾„å’Œå¼•ç”¨

### æ•°æ®ç»“æ„å®šä¹‰
```typescript
interface WeiboPost {
  // åŸºç¡€ä¿¡æ¯
  id: string;
  url: string;
  author: {
    id: string;
    name: string;
    avatar: string;
    verified: boolean;
    verificationType: string;
  };
  
  // å†…å®¹ä¿¡æ¯
  content: {
    text: string;
    hashtags: string[];
    mentions: string[];
    links: string[];
  };
  
  // åª’ä½“ä¿¡æ¯
  media: {
    images: Array<{
      url: string;
      thumbnail: string;
      width: number;
      height: number;
      size: number;
    }>;
    videos: Array<{
      url: string;
      thumbnail: string;
      duration: number;
      size: number;
    }>;
    articles: Array<{
      title: string;
      url: string;
      summary: string;
    }>;
  };
  
  // äº’åŠ¨æ•°æ®
  engagement: {
    reposts: number;
    comments: number;
    likes: number;
    views?: number;
  };
  
  // å…ƒæ•°æ®
  metadata: {
    publishTime: Date;
    source: string;
    location?: string;
    client: string;
    isAd: boolean;
    isSensitive: boolean;
  };
  
  // è¯„è®ºæ•°æ®
  comments: WeiboComment[];
}

interface WeiboComment {
  id: string;
  author: {
    id: string;
    name: string;
    avatar: string;
  };
  content: string;
  publishTime: Date;
  likes: number;
  replies: WeiboComment[];
  depth: number;
}
```

### æå–ç®—æ³•ç­–ç•¥
#### 1. æ¸è¿›å¼æå–
```typescript
const EXTRACTION_PHASES = {
  phase1: {
    priority: ['id', 'author', 'content.text', 'publishTime'],
    timeout: 5000,
    retryCount: 2
  },
  phase2: {
    priority: ['media.images', 'media.videos', 'engagement'],
    timeout: 10000,
    retryCount: 3
  },
  phase3: {
    priority: ['comments', 'hashtags', 'links'],
    timeout: 30000,
    retryCount: 5
  }
}
```

#### 2. å†…å®¹éªŒè¯
- **æ•°æ®å®Œæ•´æ€§**: æ£€æŸ¥å¿…éœ€å­—æ®µæ˜¯å¦å­˜åœ¨
- **æ ¼å¼éªŒè¯**: éªŒè¯URLã€æ—¶é—´æˆ³æ ¼å¼
- **é‡å¤æ£€æµ‹**: é¿å…é‡å¤æå–ç›¸åŒå†…å®¹
- **è´¨é‡è¿‡æ»¤**: è¿‡æ»¤ä½è´¨é‡å’Œåƒåœ¾å†…å®¹

#### 3. å­˜å‚¨ä¼˜åŒ–
- **å¢é‡å­˜å‚¨**: åªå­˜å‚¨æ–°å¢å’Œå˜åŒ–çš„æ•°æ®
- **å‹ç¼©ç®—æ³•**: å¤§æ–‡æœ¬å†…å®¹å‹ç¼©å­˜å‚¨
- **ç´¢å¼•ç­–ç•¥**: å»ºç«‹é«˜æ•ˆçš„æ•°æ®ç´¢å¼•
- **å¤‡ä»½æœºåˆ¶**: å®šæœŸå¤‡ä»½é‡è¦æ•°æ®

### ç‰¹æ®Šæƒ…å†µå¤„ç†
#### ç™»å½•çŠ¶æ€æ£€æµ‹
- **å†…å®¹å®Œæ•´æ€§**: å¯¹æ¯”ç™»å½•å‰åå¯è§å†…å®¹
- **åŠŸèƒ½å¯ç”¨æ€§**: æ£€æµ‹é«˜çº§åŠŸèƒ½æ˜¯å¦å¯ç”¨
- **æƒé™æç¤º**: å¤„ç†æƒé™ä¸è¶³çš„æƒ…å†µ
- **CookieéªŒè¯**: éªŒè¯ç™»å½•å‡­è¯æœ‰æ•ˆæ€§

#### åçˆ¬ç»•è¿‡
- **å†…å®¹è§£ç **: å¤„ç†åŠ å¯†æˆ–æ··æ·†å†…å®¹
- **åŠ¨æ€åŠ è½½**: å¤„ç†JavaScriptåŠ¨æ€ç”Ÿæˆå†…å®¹
- **éªŒè¯ç å¤„ç†**: äººå·¥ä»‹å…¥æˆ–è‡ªåŠ¨è¯†åˆ«
- **IPè½®æ¢**: ä»£ç†æ± è‡ªåŠ¨åˆ‡æ¢
```

## ğŸš€ å®ç°æŒ‡å—

### æ–‡ä»¶ç»“æ„
```
src/page-analyzer/
â”œâ”€â”€ strategies/
â”‚   â”œâ”€â”€ WeiboHomepageStrategy.ts      # ä¸»é¡µå‘ç°ç­–ç•¥
â”‚   â”œâ”€â”€ WeiboInfiniteScrollDetector.ts # æ— é™æ»šåŠ¨æ£€æµ‹
â”‚   â”œâ”€â”€ WeiboLinkExtractor.ts         # é“¾æ¥æ‰¹é‡æå–
â”‚   â”œâ”€â”€ WeiboAntiBotProtection.ts     # é˜²åæœºå™¨äººä¿æŠ¤
â”‚   â”œâ”€â”€ WeiboPostAnalyzer.ts          # å¸–å­è¯¦ç»†åˆ†æ
â”‚   â”œâ”€â”€ WeiboBatchAnalyzer.ts         # æ‰¹é‡åˆ†æåè°ƒå™¨
â”‚   â””â”€â”€ weibo-batch-test.ts           # å®Œæ•´æµ‹è¯•ç”¨ä¾‹
â”œâ”€â”€ types/
â”‚   â””â”€â”€ index.ts                      # ç±»å‹å®šä¹‰
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ ContainerDiscoveryManager.ts  # å®¹å™¨å‘ç°ç®¡ç†å™¨
â”‚   â”œâ”€â”€ HierarchyBuilder.ts           # å±‚æ¬¡ç»“æ„æ„å»ºå™¨
â”‚   â””â”€â”€ CapabilityEvaluator.ts        # èƒ½åŠ›è¯„ä¼°å™¨
â””â”€â”€ index.ts                          # ä¸»å…¥å£
```

### å¼€å‘æ­¥éª¤
#### ç¬¬ä¸€é˜¶æ®µï¼šæ ¸å¿ƒæ¡†æ¶ (ä¼˜å…ˆçº§ï¼šé«˜)
1. **WeiboHomepageStrategy.ts**
   - å®ç°ä¸»é¡µå®¹å™¨å‘ç°é€»è¾‘
   - é›†æˆç°æœ‰çš„ContainerDiscoveryManager
   - æ·»åŠ å¾®åšç‰¹å®šçš„é€‰æ‹©å™¨é…ç½®

2. **WeiboLinkExtractor.ts**
   - å®ç°é“¾æ¥æ‰¹é‡æå–åŠŸèƒ½
   - æ”¯æŒ/status/ã€/u/ã€/hashtag/æ¨¡å¼
   - æ·»åŠ å»é‡å’ŒéªŒè¯é€»è¾‘

#### ç¬¬äºŒé˜¶æ®µï¼šé«˜çº§åŠŸèƒ½ (ä¼˜å…ˆçº§ï¼šä¸­)
3. **WeiboInfiniteScrollDetector.ts**
   - å®ç°æ— é™æ»šåŠ¨æ£€æµ‹
   - æ·»åŠ DOMå˜åŒ–ç›‘å¬
   - é›†æˆåŠ è½½æ›´å¤šæŒ‰é’®å¤„ç†

4. **WeiboAntiBotProtection.ts**
   - å®ç°æ—¶é—´é—´éš”æ§åˆ¶
   - æ·»åŠ è¡Œä¸ºæ¨¡æ‹Ÿé€»è¾‘
   - é›†æˆè‡ªé€‚åº”è°ƒæ•´æœºåˆ¶

#### ç¬¬ä¸‰é˜¶æ®µï¼šå®Œæ•´åˆ†æ (ä¼˜å…ˆçº§ï¼šä¸­)
5. **WeiboPostAnalyzer.ts**
   - å®ç°å¸–å­è¯¦ç»†åˆ†æ
   - æ·»åŠ åª’ä½“å†…å®¹æå–
   - é›†æˆè¯„è®ºåŒºå¤„ç†

6. **WeiboBatchAnalyzer.ts**
   - å®ç°æ‰¹é‡åˆ†æåè°ƒ
   - æ·»åŠ å¹¶å‘æ§åˆ¶
   - é›†æˆè¿›åº¦ç›‘æ§

### æµ‹è¯•ç­–ç•¥
#### å•å…ƒæµ‹è¯•
- æ¯ä¸ªç»„ä»¶ç‹¬ç«‹æµ‹è¯•
- æ¨¡æ‹ŸDOMç¯å¢ƒ
- éªŒè¯é€‰æ‹©å™¨å‡†ç¡®æ€§

#### é›†æˆæµ‹è¯•
- ç«¯åˆ°ç«¯æµç¨‹æµ‹è¯•
- çœŸå®å¾®åšé¡µé¢æµ‹è¯•
- æ€§èƒ½å’Œç¨³å®šæ€§æµ‹è¯•

#### æµ‹è¯•ç”¨ä¾‹
```typescript
// æµ‹è¯•ç›®æ ‡ï¼šhttps://weibo.com/1195242865/5216889711886736
const TEST_CASES = {
  homepage: {
    url: 'https://weibo.com',
    expectedContainers: ['feed-container', 'weibo-card'],
    minPosts: 20
  },
  postDetail: {
    url: 'https://weibo.com/1195242865/5216889711886736',
    expectedContainers: ['content', 'comments'],
    minComments: 10
  }
}
```

### é…ç½®ç®¡ç†
#### ç¯å¢ƒé…ç½®
```typescript
interface WeiboConfig {
  // åŸºç¡€é…ç½®
  baseURL: string;
  timeout: number;
  retries: number;
  
  // é€‰æ‹©å™¨é…ç½®
  selectors: typeof WEIBO_SELECTORS;
  
  // é˜²åçˆ¬é…ç½®
  antiBot: {
    delays: DelayConfig;
    behavior: BehaviorConfig;
    fingerprint: FingerprintConfig;
  };
  
  // å­˜å‚¨é…ç½®
  storage: {
    outputDir: string;
    maxFileSize: number;
    compression: boolean;
  };
}
```

### éƒ¨ç½²å’Œä½¿ç”¨
#### æœ¬åœ°å¼€å‘
```bash
# å®‰è£…ä¾èµ–
npm run install:all

# æ„å»ºé¡¹ç›®
npm run build:all

# è¿è¡Œæµ‹è¯•
npx ts-node src/page-analyzer/strategies/weibo-batch-test.ts
```

#### ç”Ÿäº§éƒ¨ç½²
- **Dockerå®¹å™¨åŒ–**: æ‰“åŒ…ä¸ºDockeré•œåƒ
- **äº‘æœåŠ¡éƒ¨ç½²**: æ”¯æŒAWSã€é˜¿é‡Œäº‘ç­‰
- **ç›‘æ§å‘Šè­¦**: é›†æˆç›‘æ§å’Œæ—¥å¿—ç³»ç»Ÿ
- **æ•°æ®å¤‡ä»½**: è‡ªåŠ¨æ•°æ®å¤‡ä»½ç­–ç•¥

### ç»´æŠ¤å’Œæ›´æ–°
#### å®šæœŸç»´æŠ¤
- **é€‰æ‹©å™¨æ›´æ–°**: é€‚åº”å¾®åšé¡µé¢ç»“æ„å˜åŒ–
- **æ€§èƒ½ä¼˜åŒ–**: æŒç»­ä¼˜åŒ–æå–æ•ˆç‡
- **å®‰å…¨åŠ å›º**: æ›´æ–°é˜²åçˆ¬ç­–ç•¥
- **åŠŸèƒ½æ‰©å±•**: æ·»åŠ æ–°çš„æ•°æ®ç±»å‹

#### ç‰ˆæœ¬ç®¡ç†
- **è¯­ä¹‰åŒ–ç‰ˆæœ¬**: éµå¾ªSemVerè§„èŒƒ
- **å˜æ›´æ—¥å¿—**: è¯¦ç»†çš„å˜æ›´è®°å½•
- **å‘åå…¼å®¹**: ä¿æŒAPIç¨³å®šæ€§
- **è¿ç§»æŒ‡å—**: ç‰ˆæœ¬å‡çº§æŒ‡å¯¼

---

## ğŸ“ æ€»ç»“

æœ¬è®¾è®¡è“å›¾æä¾›äº†å®Œæ•´çš„å¾®åšé¡µé¢å®¹å™¨åˆ†æè§£å†³æ–¹æ¡ˆï¼Œä»ä¸»é¡µé“¾æ¥å‘ç°åˆ°æ·±åº¦å†…å®¹æå–ï¼Œæ¶µç›–äº†å®¹å™¨æ¶æ„ã€é˜²åçˆ¬æœºåˆ¶ã€æ•°æ®æå–ç­–ç•¥å’Œå®ç°æŒ‡å—ã€‚

**æ ¸å¿ƒç‰¹æ€§ï¼š**
- âœ… å±‚æ¬¡åŒ–å®¹å™¨æ¶æ„è®¾è®¡
- âœ… æ™ºèƒ½æ— é™æ»šåŠ¨æ£€æµ‹
- âœ… å…¨é¢é˜²åæœºå™¨äººä¿æŠ¤
- âœ… æ¸è¿›å¼æ•°æ®æå–ç­–ç•¥
- âœ… å®Œæ•´çš„å®ç°å’Œæµ‹è¯•æŒ‡å—

**é¢„æœŸæ•ˆæœï¼š**
- é«˜æ•ˆæ‰¹é‡æå–å¾®åšå†…å®¹
- ç¨³å®šå¯é çš„è‡ªåŠ¨åŒ–è¿è¡Œ
- å®Œæ•´çš„æ•°æ®æ”¶é›†å’Œåˆ†æ
- å¯æ‰©å±•çš„æ¶æ„è®¾è®¡

é€šè¿‡éµå¾ªè¿™ä¸ªè®¾è®¡è“å›¾ï¼Œå¯ä»¥æ„å»ºä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ã€ç¨³å®šå¯é çš„å¾®åšå†…å®¹åˆ†æç³»ç»Ÿã€‚
```