# 拾取面板开发计划（里程碑）

## M1 样式与骨架（当前）
- 顶部标签：拾取/操作/容器库（已完成样式）
- 面板内统一下拉样式（先占位，M2 实装）
- 脚本：
  - `scripts/open-weibo-ui-mock-direct.cjs`（全面板样式）
  - `scripts/open-weibo-ui-mock-direct-ops.cjs`（操作页样式）

验收：右上角面板稳定显示、标签切换正常、布局清晰。

## M2 基础功能接线
- Inpage：
  - 统一菜单组件（tabs、dropdown、结果区）
  - 拾取态接线：hover 高亮、点击选中、停止拾取打开菜单
- 操作库：
  - 加载 base + site JSON；增加 `targets/category`；按元素能力过滤
- 执行：
  - 单操作执行（高亮/点击/输入/滚动/提取）
  - 键序列转换为 `keyboard:sequence` 串接执行

验收：可对当前选中元素执行 3 类代表性操作（高亮/点击/输入+Enter），结果区可见。

## M3 队列与容器库
- 队列：
  - 添加/删除/排序/参数编辑
  - 顺序执行 + 结果聚合
- 容器库：
  - 加载/编辑/复制/删除
  - Live 预览（高亮）与执行
  - 去重策略（`classChoice + containerId`）

验收：在“操作”页配置 2~3 个动作组成的队列并顺序执行；容器库可加载并执行。

## M4 站点专用操作与打磨
- weibo 专用：展开/加载更多/打开评论/点赞/关注/转发等
- 注入鲁棒性：刷新/新 tab/重定向稳定注入，面板不重叠
- UI 打磨：边缘翻转、拖拽、尺寸调节、键盘快捷

验收：日常操作覆盖，稳定性通过 3 个典型页面回归。

## 工程化
- JSON Schema 校验：actions/events schema + `scripts/actions-validate.cjs`
- 单页测试：`scripts/run-action.cjs`（独立执行某操作）
- 记录：执行日志落盘 + 快照

---

## 待办清单（短期）
1. 实装统一下拉组件（面板内）
2. 适配过滤：元素能力识别 + 操作筛选
3. 单操作执行接线 + 结果回显
4. 队列模型与顺序执行
5. 容器库读写 API 接入
