{
  "name": "1688 JavaScriptæ³¨å…¥é«˜äº®æµ‹è¯•",
  "description": "ç›´æ¥åœ¨é¡µé¢ä¸­æ³¨å…¥JavaScriptä»£ç å®ç°å¼ºåˆ¶é«˜äº®æ•ˆæœ",
  "version": "1.0.0",
  "preflows": ["1688-login-preflow"],
  "nodes": [
    { "id": "start", "type": "StartNode", "name": "å¼€å§‹", "next": ["attach"] },
    {
      "id": "attach",
      "type": "AttachSessionNode",
      "name": "ä¼šè¯æ¥åŠ›",
      "config": {},
      "next": ["navigate_search"]
    },
    {
      "id": "navigate_search",
      "type": "NavigationNode",
      "name": "å¯¼èˆªåˆ°æœç´¢ç»“æœé¡µ",
      "config": {
        "url": "https://s.1688.com/selloffer/offer_search.htm?keywords=%B7%FE%D7%B0",
        "waitUntil": "domcontentloaded",
        "timeout": 30000
      },
      "next": ["wait_search"]
    },
    {
      "id": "wait_search",
      "type": "WaitNode",
      "name": "ç­‰å¾…æœç´¢ç»“æœå®Œå…¨åŠ è½½",
      "config": { "minMs": 3000, "maxMs": 5000 },
      "next": ["inject_highlight_script"]
    },
    {
      "id": "inject_highlight_script",
      "type": "PageSnapshotNode",
      "name": "æ³¨å…¥é«˜äº®JavaScript",
      "config": {
        "script": "// åˆ›å»ºä¸€ä¸ªå¼ºåˆ¶é«˜äº®å‡½æ•°\nfunction forceHighlight() {\n  console.log('ğŸ”¥ å¼€å§‹å¼ºåˆ¶é«˜äº®...');\n  \n  // 1. ä¿®æ”¹æ•´ä¸ªé¡µé¢èƒŒæ™¯è‰²\n  document.body.style.backgroundColor = 'rgba(255, 255, 0, 0.5)';\n  document.body.style.transition = 'background-color 0.5s';\n  \n  // 2. æ·»åŠ é¡¶éƒ¨å·¨å¤§æç¤ºæ¡\n  const topAlert = document.createElement('div');\n  topAlert.id = 'highlight-alert-top';\n  topAlert.innerHTML = '<h1 style=\"background:linear-gradient(45deg, #ff0000, #ff6600);color:white;padding:20px;font-size:36px;position:fixed;top:0;left:0;width:100%;z-index:2147483647;text-align:center;font-weight:bold;border:5px solid black;box-shadow:0 5px 20px rgba(0,0,0,0.5);\">ğŸ”¥ é«˜äº®æµ‹è¯•æ­£åœ¨è¿è¡Œ ğŸ”¥</h1>';\n  document.body.appendChild(topAlert);\n  \n  // 3. é«˜äº®æ‰€æœ‰å¯èƒ½çš„å•†å®¶å®¹å™¨\n  const merchantSelectors = [\n    '.sm-offer-item', \n    '.offer-item', \n    '.sm-offer', \n    '[class*=\"offer\"]',\n    'div[class*=\"sm-offer\"]',\n    'div[class*=\"offer-item\"]',\n    'article',\n    'section[class*=\"offer\"]'\n  ];\n  \n  let merchantCount = 0;\n  merchantSelectors.forEach(selector => {\n    try {\n      const elements = document.querySelectorAll(selector);\n      console.log(`é€‰æ‹©å™¨ ${selector}: æ‰¾åˆ° ${elements.length} ä¸ªå…ƒç´ `);\n      \n      elements.forEach((el, index) => {\n        if (index < 10) {\n          // å¼ºåˆ¶è®¾ç½®æ ·å¼ï¼Œä½¿ç”¨!importantç¡®ä¿ä¸è¢«è¦†ç›–\n          el.style.setProperty('border', '5px solid #ff0000', 'important');\n          el.style.setProperty('background', 'linear-gradient(135deg, rgba(255,0,0,0.3), rgba(255,100,0,0.3))', 'important');\n          el.style.setProperty('box-shadow', '0 0 20px rgba(255,0,0,0.8), inset 0 0 10px rgba(255,255,0,0.5)', 'important');\n          el.style.setProperty('z-index', '2147483640', 'important');\n          el.style.setProperty('position', 'relative', 'important');\n          el.style.setProperty('transform', 'scale(1.02)', 'important');\n          el.style.setProperty('border-radius', '10px', 'important');\n          \n          // æ·»åŠ å•†å®¶æ ‡è®°\n          const merchantLabel = document.createElement('div');\n          merchantLabel.textContent = `å•†å®¶å®¹å™¨ ${++merchantCount}`;\n          merchantLabel.style.cssText = `\n            position: absolute;\n            top: 0;\n            left: 0;\n            background: linear-gradient(45deg, #ffff00, #ff9900);\n            color: #ff0000;\n            font-weight: bold;\n            font-size: 16px;\n            padding: 8px 12px;\n            z-index: 2147483646;\n            border: 3px solid #ff0000;\n            border-radius: 0 0 10px 0;\n            box-shadow: 2px 2px 10px rgba(0,0,0,0.5);\n            font-family: Arial, sans-serif;\n            text-shadow: 1px 1px 2px rgba(255,255,255,0.8);\n            transform: rotate(-5deg);\n          `;\n          el.appendChild(merchantLabel);\n        }\n      });\n    } catch (e) {\n      console.error(`é€‰æ‹©å™¨ ${selector} æ‰§è¡Œå‡ºé”™:`, e);\n    }\n  });\n  \n  // 4. é«˜äº®æ‰€æœ‰å¯èƒ½çš„è”ç³»æ–¹å¼\n  const contactSelectors = [\n    '[class*=\"contact\"]', \n    '[class*=\"chat\"]', \n    '[class*=\"im\"]', \n    '[class*=\"æ—ºæ—º\"]', \n    '.sm-im', \n    '.s-im',\n    'a[class*=\"contact\"]',\n    'button[class*=\"chat\"]',\n    'div[class*=\"im\"]',\n    'span[class*=\"chat\"]'\n  ];\n  \n  let contactCount = 0;\n  contactSelectors.forEach(selector => {\n    try {\n      const elements = document.querySelectorAll(selector);\n      console.log(`è”ç³»æ–¹å¼é€‰æ‹©å™¨ ${selector}: æ‰¾åˆ° ${elements.length} ä¸ªå…ƒç´ `);\n      \n      elements.forEach((el, index) => {\n        if (index < 15) {\n          // å¼ºåˆ¶è®¾ç½®æ ·å¼\n          el.style.setProperty('border', '4px solid #0066ff', 'important');\n          el.style.setProperty('background', 'linear-gradient(135deg, rgba(0,100,255,0.4), rgba(0,200,255,0.4))', 'important');\n          el.style.setProperty('box-shadow', '0 0 15px rgba(0,100,255,0.8), inset 0 0 8px rgba(0,255,255,0.6)', 'important');\n          el.style.setProperty('z-index', '2147483645', 'important');\n          el.style.setProperty('position', 'relative', 'important');\n          el.style.setProperty('transform', 'scale(1.1)', 'important');\n          el.style.setProperty('border-radius', '8px', 'important');\n          el.style.setProperty('animation', 'pulse 1s infinite', 'important');\n          \n          // æ·»åŠ è”ç³»æ–¹å¼æ ‡è®°\n          const contactLabel = document.createElement('div');\n          contactLabel.textContent = `æ—ºæ—º ${++contactCount}`;\n          contactLabel.style.cssText = `\n            position: absolute;\n            top: 0;\n            right: 0;\n            background: linear-gradient(45deg, #00ffff, #0099ff);\n            color: #0000ff;\n            font-weight: bold;\n            font-size: 14px;\n            padding: 6px 10px;\n            z-index: 2147483647;\n            border: 3px solid #0066ff;\n            border-radius: 0 0 0 8px;\n            box-shadow: 2px 2px 8px rgba(0,0,0,0.5);\n            font-family: Arial, sans-serif;\n            text-shadow: 1px 1px 2px rgba(255,255,255,0.9);\n            transform: rotate(5deg);\n          `;\n          el.appendChild(contactLabel);\n        }\n      });\n    } catch (e) {\n      console.error(`è”ç³»æ–¹å¼é€‰æ‹©å™¨ ${selector} æ‰§è¡Œå‡ºé”™:`, e);\n    }\n  });\n  \n  // 5. æ·»åŠ CSSåŠ¨ç”»\n  const style = document.createElement('style');\n  style.textContent = `\n    @keyframes pulse {\n      0% { box-shadow: 0 0 15px rgba(0,100,255,0.8), inset 0 0 8px rgba(0,255,255,0.6); }\n      50% { box-shadow: 0 0 25px rgba(0,100,255,1), inset 0 0 12px rgba(0,255,255,0.8); }\n      100% { box-shadow: 0 0 15px rgba(0,100,255,0.8), inset 0 0 8px rgba(0,255,255,0.6); }\n    }\n  `;\n  document.head.appendChild(style);\n  \n  // 6. æ·»åŠ åº•éƒ¨ç»Ÿè®¡ä¿¡æ¯\n  const statsBar = document.createElement('div');\n  statsBar.id = 'highlight-stats';\n  statsBar.innerHTML = `\n    <div style=\"background:linear-gradient(45deg, #000000, #333333);color:#00ff00;padding:15px;position:fixed;bottom:0;left:0;width:100%;z-index:2147483647;font-size:18px;text-align:center;font-weight:bold;border-top:5px solid #00ff00;box-shadow:0 -5px 20px rgba(0,0,0,0.5);\">\n      âœ… é«˜äº®ç»Ÿè®¡: æ‰¾åˆ° ${merchantCount} ä¸ªå•†å®¶å®¹å™¨ | ${contactCount} ä¸ªæ—ºæ—ºè”ç³»æ–¹å¼ | æ•ˆæœåº”è¯¥éå¸¸æ˜æ˜¾ï¼\n    </div>\n  `;\n  document.body.appendChild(statsBar);\n  \n  console.log(`âœ… å¼ºåˆ¶é«˜äº®å®Œæˆ! å•†å®¶: ${merchantCount}, è”ç³»æ–¹å¼: ${contactCount}`);\n  \n  // 7. æ·»åŠ é—ªçƒæ•ˆæœ\n  setInterval(() => {\n    const alert = document.getElementById('highlight-alert-top');\n    if (alert) {\n      alert.style.background = alert.style.background.includes('ff0000') ? \n        'linear-gradient(45deg, #ff6600, #ff0000)' : 'linear-gradient(45deg, #ff0000, #ff6600)';\n    }\n  }, 1000);\n  \n  return { merchantCount, contactCount, success: true };\n}\n\n// ç«‹å³æ‰§è¡Œé«˜äº®\nforceHighlight();\n\n// 3ç§’åå†æ‰§è¡Œä¸€æ¬¡ï¼Œç¡®ä¿é¡µé¢åŠ è½½å®Œæˆ\nsetTimeout(forceHighlight, 3000);\n\n// å¦‚æœé¡µé¢æ˜¯åŠ¨æ€åŠ è½½çš„ï¼Œç›‘å¬å˜åŒ–\nconst observer = new MutationObserver(() => {\n  console.log('æ£€æµ‹åˆ°é¡µé¢å˜åŒ–ï¼Œé‡æ–°é«˜äº®...');\n  forceHighlight();\n});\n\nobserver.observe(document.body, { childList: true, subtree: true });",
        "saveScreenshots": true
      },
      "next": ["keep_highlight"]
    },
    {
      "id": "keep_highlight",
      "type": "WaitNode",
      "name": "ä¿æŒé«˜äº®30ç§’ä¾¿äºè§‚å¯Ÿ",
      "config": { "minMs": 30000, "maxMs": 35000 },
      "next": ["end"]
    },
    {
      "id": "end",
      "type": "EndNode",
      "name": "ç»“æŸæµ‹è¯•ï¼ˆä¿æŒé¡µé¢æ‰“å¼€ï¼‰",
      "config": { "cleanup": false, "saveLogs": true }
    }
  ],
  "globalConfig": {
    "logLevel": "info",
    "screenshotOnError": true,
    "autoCleanup": false,
    "parallelExecution": false,
    "timeout": 300000
  }
}