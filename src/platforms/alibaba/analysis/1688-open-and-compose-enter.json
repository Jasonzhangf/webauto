{
  "name": "1688 Open Chat And Compose (Enter Send)",
  "description": "会话接力 → 导航搜索页 → 单击旺旺在线 → 输入‘你好’ → 回车发送",
  "version": "1.0.0",
  "nodes": [
    { "id": "start", "type": "StartNode", "name": "开始", "next": ["attach"] },
    { "id": "attach", "type": "AttachSessionNode", "name": "会话接力", "config": {}, "next": ["cookies"] },
    { "id": "cookies", "type": "CookieLoaderNode", "name": "加载Cookie", "config": { "cookiePath": "~/.webauto/cookies/1688-domestic.json" }, "next": ["nav"] },
    { "id": "nav", "type": "NavigationNode", "name": "导航搜索页", "config": { "url": "https://s.1688.com/selloffer/offer_search.htm?keywords=%B9%A4%D2%B5%B4%F3%B7%E7%C9%C8&spm=a260k.home2025.searchbox.0", "waitUntil": "domcontentloaded", "timeout": 30000 }, "next": ["wait"] },
    { "id": "wait", "type": "WaitNode", "name": "等待渲染", "config": { "minMs": 1000, "maxMs": 1800 }, "next": ["dismiss"] },
    { "id": "dismiss", "type": "ModalDismissNode", "name": "关闭模态", "config": { "maxAttempts": 5, "retryDelay": 400 }, "next": ["open"] },
    { "id": "open", "type": "PopupTokenCaptureNode", "name": "打开聊天窗口(单次)", "config": { "containerSelector": ".space-pc-ui2024-content > div:nth-child(5)", "clickSelectors": [".offer-shop-row .ww-link.ww-online", "span.J_WangWang .ww-link.ww-online", "a.ww-link.ww-inline", "span.J_WangWang a.ww-link", "a[href*=air.1688.com/app/]"] , "hostFilter": "air.1688.com", "startIndex": 1, "maxItems": 1, "minClickDelay": 600, "maxClickDelay": 1500, "afterPopupWaitMs": 1200, "closePopup": false, "popupClickSelectors": ["body > div:nth-child(23)"], "dryMode": false, "enforceWebPreference": true }, "next": ["compose"] },
    { "id": "compose", "type": "ChatComposeNode", "name": "多方式发送", "config": { "hostFilter": "air.1688.com", "message": "你好", "messageVariants": { "enter": "你好(回车)", "click": "你好(点击)", "dispatch": "你好呀(派发)", "mouse": "你好！(坐标)", "scan": "您好(扫描)" }, "sendViaEnter": true, "send": true, "stabilizeMs": 1500, "highlightMs": 2000, "inputSelectors": ["pre.edit[contenteditable=true]", ".im-chat-input [contenteditable]", ".msg-input [contenteditable]", "div[contenteditable=true]", "div[contenteditable]", "textarea"], "sendSelectors": [".next-btn", ".im-chat-send-btn", ".send-btn", "button:has-text(发送)", "a:has-text(发送)", "[role=button]"] }, "next": ["save"] },
    { "id": "save", "type": "ResultSaverNode", "name": "保存结果", "config": { "outputDir": "archive/workflow-records", "filenameTemplate": "1688-chat-compose-enter-{timestamp}.json", "includeMetadata": true }, "next": ["end"] },
    { "id": "end", "type": "EndNode", "name": "结束", "config": { "cleanup": false, "saveLogs": true } }
  ],
  "globalConfig": { "logLevel": "info", "screenshotOnError": true, "autoCleanup": false, "parallelExecution": false, "timeout": 120000 }
}
