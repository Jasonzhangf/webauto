{
  "name": "1688 Direct Chat Test",
  "description": "直接使用聊天URL测试ChatComposeNode1688",
  "version": "1.0.0",
  "nodes": [
    { "id": "start", "type": "StartNode", "name": "开始", "next": ["attach"] },
    { "id": "attach", "type": "AttachSessionNode", "name": "会话接力", "config": {}, "next": ["navigate_direct_chat"] },
    {
      "id": "navigate_direct_chat",
      "type": "NavigationNode",
      "name": "直接导航到聊天页面",
      "config": {
        "url": "https://air.1688.com/app/ocms-fusion-components-1688/def_cbu_web_im/index.html?touid=cnalichn%E6%B0%B8%E5%BA%B7%E5%B8%82%E9%80%94%E6%B4%BE%E5%B7%A5%E8%B4%B8%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8&siteid=cnalichn&status=2&portalId=&gid=&offerId=858532417224&itemsId=&spmid=a26352.13672862.offerlist#/",
        "waitUntil": "domcontentloaded",
        "timeout": 30000
      },
      "next": ["wait_for_chat"]
    },
    {
      "id": "wait_for_chat",
      "type": "WaitNode",
      "name": "等待聊天页面加载",
      "config": { "minMs": 5000, "maxMs": 8000 },
      "next": ["dismiss_client_prompt"]
    },
    {
      "id": "dismiss_client_prompt",
      "type": "ModalDismissNode",
      "name": "关闭客户端提示",
      "config": { "maxAttempts": 3, "retryDelay": 1000 },
      "next": ["react_chat_test"]
    },
    {
      "id": "react_chat_test",
      "type": "ChatComposeNode1688",
      "name": "1688 React聊天测试",
      "config": {
        "hostFilter": "air.1688.com",
        "message": "🚀 ChatComposeNode1688直接测试 - 这是测试消息，用于验证React组件处理能力",
        "stepGate": true,
        "send": false,
        "highlightMs": 20000,
        "stabilizeMs": 5000
      },
      "next": ["final_result"]
    },
    {
      "id": "final_result",
      "type": "GateOverlayNode",
      "name": "显示测试结果",
      "config": {
        "hostFilter": "air.1688.com",
        "title": "✅ 1688 Direct Chat测试完成",
        "message": "直接聊天测试已完成！\\n\\n📋 请检查以下内容：\\n\\n1️⃣ 输入测试：\\n- 是否看到聊天框中有测试消息？\\n- 消息格式是否正确？\\n\\n2️⃣ 发送按钮：\\n- 是否看到红色高亮的发送按钮？\\n- 按钮位置是否正确？\\n\\n3️⃣ 控制台日志：\\n- 按F12查看Console\\n- 是否有React组件相关日志？\\n- 是否有错误信息？\\n\\n💡 如果测试成功，说明ChatComposeNode1688可以：\\n✅ 处理1688 React聊天界面\\n✅ 绕过aplus脚本时序问题\\n✅ 正确定位非标准输入元素\\n✅ 识别React发送按钮\\n\\n点击'下一步'保存测试结果",
        "stepGate": true,
        "block": true
      },
      "next": ["save_results"]
    },
    {
      "id": "save_results",
      "type": "ResultSaverNode",
      "name": "保存测试结果",
      "config": {
        "outputDir": "archive/workflow-records",
        "filenameTemplate": "1688-direct-chat-test-{timestamp}.json",
        "includeMetadata": true
      },
      "next": ["end"]
    },
    {
      "id": "end",
      "type": "EndNode",
      "name": "结束",
      "config": { "cleanup": false, "saveLogs": true }
    }
  ],
  "globalConfig": {
    "logLevel": "info",
    "screenshotOnError": true,
    "autoCleanup": false,
    "parallelExecution": false,
    "timeout": 900000
  }
}