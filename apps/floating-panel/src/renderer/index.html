<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>WebAuto Floating UI</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font: 11px/1.4 system-ui, sans-serif; background: var(--bg-primary); color: var(--text-primary); overflow: hidden; }
    
    /* 顶部拖拽栏 - 紧凑设计 */
    #drag-area { 
      height: 22px; 
      background: #2d2d2d; 
      border-bottom: 1px solid #3e3e3e; 
      cursor: grab; 
      display: flex; 
      align-items: center; 
      padding: 0 8px; 
      user-select: none; 
      -webkit-app-region: drag; 
      justify-content: space-between;
    }
    #drag-area:active { cursor: grabbing; }
    .title { font-weight: 600; font-size: 11px; color: #ccc; }
    .window-controls { display: flex; gap: 6px; }
    .control-btn { 
      width: 12px; height: 12px; border-radius: 50%; border: none; cursor: pointer; -webkit-app-region: no-drag;
    }
    .control-btn.minimize { background: #ffbd2e; }
    .control-btn.close { background: #ff5f56; }
    .control-btn:hover { opacity: 0.8; }

    /* 状态指示 - 仅图标 */
    #status-icon {
      width: 8px; height: 8px; border-radius: 50%; background: #bd7e7e; margin-left: 8px;
    }
    #status-icon.connected { background: #7ebd7e; box-shadow: 0 0 4px #7ebd7e; }

    /* 主布局 */
    #container { height: calc(100vh - 22px); display: flex; flex-direction: column; }
    
    /* 图谱区域 */
    #graphPanel { flex: 1; min-height: 100px; overflow: hidden; background: #1e1e1e; position: relative; }
    
    /* 分割线 */
    #splitterHandle {
      height: 4px;
      background: #252526;
      border-top: 1px solid #3e3e3e;
      border-bottom: 1px solid #3e3e3e;
      cursor: row-resize;
    }
    
    /* 底部详情面板 */
    #bottom-panel { 
      flex: none; 
      height: 240px; 
      min-height: 150px; 
      background: #252526; 
      display: flex; 
      flex-direction: column; 
    }

    /* 详情内容容器 */
    #containerDetailsContent {
      flex: 1;
      overflow-y: auto;
      padding: 0;
    }
    
    /* Loading 指示器 */
    .loading-overlay {
      position: absolute; top: 4px; right: 4px; 
      background: rgba(0,0,0,0.7); color: #e5b507; 
      font-size: 9px; padding: 2px 6px; border-radius: 2px;
      display: none; pointer-events: none;
    }
    .loading-overlay.active { display: block; }

    /* 捕获按钮 - 浮动在图谱右下角 */
    #btnPicker {
      position: absolute; bottom: 8px; right: 8px;
      padding: 4px 8px; background: #0e639c; color: white;
      border: none; border-radius: 2px; cursor: pointer;
      font-size: 10px; opacity: 0.8;
    }
    #btnPicker:hover { opacity: 1; }
    
    /* 兼容旧 CSS 变量 */
    :root {
      --bg-primary: #1e1e1e;
      --text-primary: #cccccc;
      --border-color: #3e3e3e;
    }
  </style>
</head>
<body>
  <div id="drag-area">
    <div style="display:flex;align-items:center;">
      <span class="title">WebAuto</span>
      <div id="status-icon" title="Bus Status"></div>
    </div>
    <div class="window-controls">
      <button id="btnMinimize" class="control-btn minimize" title="Minimize"></button>
      <button id="btnClose" class="control-btn close" title="Close"></button>
    </div>
  </div>

  <div id="container">
    <div id="graphPanel">
      <div id="loadingIndicator" class="loading-overlay">Loading...</div>
      <button id="btnPicker">捕获元素</button>
    </div>
    
    <div id="splitterHandle"></div>
    
    <div id="bottom-panel">
      <!-- 只有这一个 Tab 内容，移除 Tab 栏节省空间 -->
      <div id="containerDetailsContent">
        <!-- JS 动态渲染内容 -->
        <div style="padding:10px; color:#777; text-align:center; font-size:10px;">
          Select a container in the graph
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="./index.js"></script>
</body>
</html>
