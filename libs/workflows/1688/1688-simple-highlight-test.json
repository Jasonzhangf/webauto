{
  "name": "1688ç®€å•é”šç‚¹é«˜äº®æµ‹è¯•",
  "description": "æœ€ç®€å•çš„é”šç‚¹é«˜äº®åŸºç¡€èŠ‚ç‚¹æµ‹è¯•",
  "version": "1.0.0",
  "nodes": [
    { "id": "start", "type": "StartNode", "name": "å¼€å§‹", "next": ["ensure_camoufox"] },
    { "id": "ensure_camoufox", "type": "CamoufoxEnsureNode", "name": "Camoufox æ ¡éªŒ/å®‰è£…", "config": {}, "next": ["browser_init"] },
    {
      "id": "browser_init",
      "type": "BrowserInitNode",
      "name": "æµè§ˆå™¨åˆå§‹åŒ–",
      "config": {
        "engine": "camoufox",
        "headless": false,
        "viewport": { "width": 1920, "height": 1080 }
      },
      "next": ["load_cookies"]
    },
    {
      "id": "load_cookies",
      "type": "CookieLoaderNode",
      "name": "åŠ è½½Cookie",
      "config": {
        "cookiePath": "~/.webauto/cookies/1688-domestic.json"
      },
      "next": ["navigate_search"]
    },
    {
      "id": "navigate_search",
      "type": "NavigationNode",
      "name": "å¯¼èˆªåˆ°1688æœç´¢é¡µ",
      "config": {
        "url": "https://s.1688.com/selloffer/offer_search.htm?keywords=%B8%D6%BB%AF%C4%A4",
        "waitUntil": "domcontentloaded",
        "timeout": 30000
      },
      "next": ["wait_page"]
    },
    {
      "id": "wait_page",
      "type": "WaitNode",
      "name": "ç­‰å¾…é¡µé¢åŠ è½½",
      "config": { "minMs": 3000, "maxMs": 5000 },
      "next": ["simple_highlight"]
    },
    {
      "id": "simple_highlight",
      "type": "AnchorPointNode",
      "name": "ç®€å•é”šç‚¹é«˜äº®",
      "config": {
        "selectors": [".sm-offer-item", ".offer-item", "[class*=offer]"],
        "requireVisible": true,
        "maxWaitMs": 10000,
        "pollIntervalMs": 1000,
        "highlight": true,
        "persistHighlight": true,
        "highlightColor": "#ff0000",
        "highlightLabel": "TARGET",
        "highlightDurationMs": 30000,
        "alias": "testTarget"
      },
      "next": ["verify_highlight"]
    },
    {
      "id": "verify_highlight",
      "type": "PageSnapshotNode",
      "name": "éªŒè¯é«˜äº®æ•ˆæœ",
      "config": {
        "script": "console.log('ğŸ” éªŒè¯é”šç‚¹é«˜äº®æ•ˆæœ...');\n\n// æ£€æŸ¥æ˜¯å¦æœ‰é«˜äº®å…ƒç´ \nconst overlays = document.querySelectorAll('.__webauto_anchor_overlay__');\nconst labels = document.querySelectorAll('[style*=\"position:fixed\"][style*=\"background:#ff0000\"]');\nconst outlined = document.querySelectorAll('[style*=\"outline\"][style*=\"#ff0000\"]');\n\nconsole.log(`é«˜äº®è¦†ç›–å±‚: ${overlays.length}`);\nconsole.log(`æ ‡ç­¾å…ƒç´ : ${labels.length}`);\nconsole.log(`è½®å»“å…ƒç´ : ${outlined.length}`);\n\n// åˆ›å»ºéªŒè¯ç»“æœé¢æ¿\nconst resultPanel = document.createElement('div');\nresultPanel.innerHTML = `\n  <h2 style=\"color: #ff0000; margin: 0 0 10px 0;\">ğŸ¯ é”šç‚¹é«˜äº®éªŒè¯ç»“æœ</h2>\n  <p><strong>é«˜äº®è¦†ç›–å±‚:</strong> ${overlays.length} ä¸ª</p>\n  <p><strong>æ ‡ç­¾å…ƒç´ :</strong> ${labels.length} ä¸ª</p>\n  <p><strong>è½®å»“å…ƒç´ :</strong> ${outlined.length} ä¸ª</p>\n  <p><strong>æ€»è®¡:</strong> ${overlays.length + labels.length + outlined.length} ä¸ªé«˜äº®å…ƒç´ </p>\n  <hr style=\"margin: 10px 0;\">\n  <p style=\"color: #007aff;\">å¦‚æœçœ‹åˆ°çº¢è‰²é«˜äº®æ•ˆæœï¼Œè¯´æ˜é”šç‚¹é«˜äº®åŠŸèƒ½æ­£å¸¸ï¼</p>\n  <p style=\"color: #666; font-size: 11px;\">é«˜äº®å°†ä¿æŒ30ç§’åè‡ªåŠ¨æ¶ˆå¤±</p>\n`;\n\nresultPanel.style.cssText = `\n  position: fixed;\n  top: 50px;\n  right: 50px;\n  background: white;\n  border: 3px solid #ff0000;\n  padding: 20px;\n  border-radius: 10px;\n  box-shadow: 0 0 20px rgba(255, 0, 0, 0.5);\n  z-index: 2147483647;\n  font-family: Arial, sans-serif;\n  font-size: 14px;\n  min-width: 250px;\n`;\n\ndocument.body.appendChild(resultPanel);\n\n// 30ç§’åç§»é™¤é¢æ¿\nsetTimeout(() => {\n  try { resultPanel.remove(); } catch {}\n}, 30000);\n\nreturn {\n  success: true,\n  overlays: overlays.length,\n  labels: labels.length,\n  outlined: outlined.length,\n  total: overlays.length + labels.length + outlined.length,\n  timestamp: new Date().toISOString()\n};",
        "saveScreenshots": true
      },
      "next": ["end"]
    },
    {
      "id": "end",
      "type": "EndNode",
      "name": "ç»“æŸ",
      "config": { "cleanup": false, "saveLogs": true }
    }
  ],
  "globalConfig": {
    "logLevel": "info",
    "screenshotOnError": true,
    "autoCleanup": false,
    "parallelExecution": false,
    "timeout": 120000
  }
}