# WebAuto 系统修复与验证计划

## 当前状态

### 已完成的功能测试
- ✅ 基础服务启动：Unified API (7701) + Browser Service (7704)
- ✅ 浮窗 Preload ESM 测试通过
- ✅ 浏览器 Profile 恢复测试通过
- ⚠️ 高亮功能：容器匹配成功，selector/dom_path 高亮部分工作

### 当前待解决问题
1. WebSocket 连接和渲染帧错误
   - 现象：浮窗启动时报 "Render frame was disposed before WebFrameMain could be accessed"
   - 影响：主进程到渲染进程的消息发送失败
   
2. 浮窗 UI 初始化问题
   - 现象：匹配成功但浮窗没有显示 DOM 连接
   - 根因：UI 元件未正确初始化或数据未正确获取

3. 启动健康检查不完善
   - 现象：服务启动但连接未建立也被视为成功
   - 需求：确保每个 UI 元件正确初始化并能获取必要数据

## 执行计划

### 阶段 1：修复 WebSocket 连接和渲染帧问题
- [ ] 1.1 分析 WebSocket 连接流程
- [ ] 1.2 修复 "Render frame was disposed" 错误
- [ ] 1.3 确保 WebSocket 消息正确传递

### 阶段 2：完善启动健康检查
- [ ] 2.1 浮窗 UI 健康验证机制
- [ ] 2.2 服务连接验证
- [ ] 2.3 数据获取验证

### 阶段 3：实现 UI 初始化验证
- [ ] 3.1 验证 DOM 树绘制
- [ ] 3.2 验证连接线绘制
- [ ] 3.3 验证容器匹配结果显示

### 阶段 4：浮窗 UI 改善
- [ ] 4.1 优化空状态 UI（无 operation 时的引导与默认内容）
- [ ] 4.2 空容器一键生成默认 operation
- [ ] 4.3 改善 operation 添加表单的视觉层次与交互提示
- [ ] 4.4 可视化 operation 卡片列表
- [ ] 4.5 operation 内联编辑
- [ ] 4.6 operation 删除/禁用

### 阶段 5：测试验证
- [ ] 5.1 扩展全局回环测试覆盖范围
- [ ] 5.2 验证所有修复
- [ ] 5.3 验证完整功能

## 执行记录
2026-01-02：建立修复计划，准备开始执行。

