# WebAuto 浮窗 UI 完善实施计划

## 背景

已成功恢复到稳定版本（commit 91c1ebb），系统可以正常启动，容器匹配功能正常。
现在的目标是完善浮窗 UI 的绘制、用户交互和容器编辑功能。

## 当前状态

- ✅ Unified API 服务正常运行 (7701)
- ✅ Browser Service 服务正常运行 (7704)  
- ✅ 容器匹配功能正常
- ✅ 浮窗 UI 已启动并连接
- ✅ 系统可以创建容器并进行编辑
- ✅ DOM-DOM 图形显示正常
- ✅ 容器-DOM 关联正常

## 实施计划

### 阶段 1: 基础功能验证（MVP）

#### 1.1 完善旧容器显示问题
- [ ] 验证没有 operation 的容器是否正确显示内容
- [ ] 添加默认 operation 生成机制
- [ ] 确保 UI 能正确渲染空状态

#### 1.2 完善 UI 组件功能
- [ ] 测试 CapturePanel 组件是否正常工作
- [ ] 测试 ContainerTree 组件是否正常工作
- [ ] 验证容器详情面板的交互

#### 1.3 容器操作编辑功能
- [ ] 验证添加新 operation 的功能
- [ ] 验证编辑现有 operation 的功能
- [ ] 验证删除 operation 的功能
- [ ] 验证启用/禁用 operation 的功能

### 阶段 2: 功能完善

#### 2.1 UI 绘制增强
- [ ] 优化 DOM 树的渲染性能
- [ ] 改进容器-DOM 连线的显示效果
- [ ] 添加选中高亮效果

#### 2.2 用户交互优化
- [ ] 添加快捷键支持
- [ ] 优化拖拽体验
- [ ] 添加撤销/重做功能

#### 2.3 容器编辑完善
- [ ] 添加 operation 模板库
- [ ] 支持 operation 的复制粘贴
- [ ] 添加批量编辑功能

### 阶段 3: 高级功能

#### 3.1 自动化增强
- [ ] 添加智能 operation 推荐
- [ ] 自动生成默认 operations
- [ ] AI 辅助编辑

#### 3.2 数据持久化
- [ ] 优化保存机制
- [ ] 添加版本历史
- [ ] 支持导入导出

#### 3.3 调试工具
- [ ] 添加 operation 执行调试
- [ ] 实时预览功能
- [ ] 性能分析工具

## 当前重点

### 立即执行任务（阶段 1.1）

1. **验证旧容器显示问题**
   - 检查没有 operation 的容器渲染
   - 添加空状态提示
   - 生成默认 operation 建议

2. **完善 UI 组件验证**
   - 测试 CapturePanel
   - 测试 ContainerTree  
   - 验证交互流程

3. **容器操作编辑**
   - 添加新 operation
   - 编辑现有 operation
   - 删除 operation

## 进度跟踪

- [ ] 阶段 1.1: 完善旧容器显示问题
- [ ] 阶段 1.2: 完善 UI 组件功能
- [ ] 阶段 1.3: 容器操作编辑功能
- [ ] 阶段 2.1: UI 绘制增强
- [ ] 阶段 2.2: 用户交互优化
- [ ] 阶段 2.3: 容器编辑完善
- [ ] 阶段 3.1: 自动化增强
- [ ] 阶段 3.2: 数据持久化
- [ ] 阶段 3.3: 调试工具

## 注意事项

- 所有修改使用 TypeScript/TS
- 禁止使用 Python 自动化脚本
- 禁止使用模糊匹配的进程终止命令
- 保持 ESM 架构一致性
