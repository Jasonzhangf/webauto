# WebAuto CLI 架构设计

## 概述
WebAuto CLI 是一个基于MCP协议的网页自动化处理程序，分为运行态和管理态。运行态提供CLI接口，管理态提供Web界面用于配置规则和流水线。

## 架构图
```
┌─────────────────┐    ┌──────────────────┐
│   管理态 (Web)   │    │   运行态 (CLI)    │
├─────────────────┤    ├──────────────────┤
│ 规则编辑器      │    │ 流水线执行器     │
│ 流水线配置      │    │ 规则应用引擎     │
│ Cookie管理      │    │ 浏览器自动化     │
│ AI目标提取      │    │ 错误处理         │
└─────────────────┘    └──────────────────┘
         │                       │
         └───────────────────────┘
         │           │
┌─────────────────────────────────────┐
│           基础设施层                │
├─────────────────────────────────────┤
│ RCC基础模块      │ RCC错误处理模块  │
│ Camoufox浏览器   │ OpenAI API       │
│ 规则引擎         │ Cookie管理器     │
└─────────────────────────────────────┘
```

## 模块说明

### 1. 管理态 (Web)
- **规则编辑器**: 提供界面用于定义网页操作规则
- **流水线配置**: 配置流水线步骤和目标
- **Cookie管理**: 管理和配置Cookie
- **AI目标提取**: 使用AI提取网页目标元素

### 2. 运行态 (CLI)
- **流水线执行器**: 执行定义的流水线
- **规则应用引擎**: 应用规则到网页
- **浏览器自动化**: 使用Camoufox进行网页操作
- **错误处理**: 处理运行时错误

### 3. 基础设施层
- **RCC基础模块**: 提供基础功能模块
- **RCC错误处理模块**: 统一错误处理机制
- **Camoufox浏览器**: 网页自动化工具
- **OpenAI API**: AI功能集成
- **规则引擎**: 规则存储和匹配
- **Cookie管理器**: Cookie自动保存和加载