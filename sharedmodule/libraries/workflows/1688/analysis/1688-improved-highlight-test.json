{
  "name": "1688æ”¹è¿›ç‰ˆé«˜äº®æµ‹è¯•",
  "description": "ç™»å½•1688å¹¶æ‰§è¡Œæ”¹è¿›ç‰ˆå‘é€æŒ‰é’®é«˜äº®è„šæœ¬",
  "version": "1.0.0",
  "preflows": ["1688-login-preflow"],
  "anchor": {
    "hostFilter": "1688.com",
    "selectors": [".userAvatarLogo img"],
    "requireVisible": true,
    "maxWaitMs": 600000,
    "pollIntervalMs": 1500,
    "highlight": true,
    "persistHighlight": true,
    "highlightLabel": "LOGIN_ANCHOR"
  },
  "nodes": [
    { "id": "start", "type": "StartNode", "name": "å¼€å§‹", "next": ["attach"] },
    {
      "id": "attach",
      "type": "AttachSessionNode",
      "name": "ä¼šè¯æ¥åŠ›",
      "config": {},
      "next": ["navigate_to_chat"]
    },
    {
      "id": "navigate_to_chat",
      "type": "NavigationNode",
      "name": "å¯¼èˆªåˆ°1688èŠå¤©é¡µé¢",
      "config": {
        "url": "https://air.1688.com/app/ocms-fusion-components-1688/def_cbu_web_im/index.html",
        "waitUntil": "domcontentloaded",
        "timeout": 30000
      },
      "next": ["wait_chat_load"]
    },
    {
      "id": "wait_chat_load",
      "type": "WaitNode",
      "name": "ç­‰å¾…èŠå¤©é¡µé¢åŠ è½½",
      "config": { "minMs": 5000, "maxMs": 8000 },
      "next": ["execute_improved_highlight"]
    },
    {
      "id": "execute_improved_highlight",
      "type": "JavaScriptExecutionNode",
      "name": "æ‰§è¡Œæ”¹è¿›ç‰ˆé«˜äº®è„šæœ¬",
      "config": {
        "script": "console.log('ğŸ¨ å¼€å§‹æ”¹è¿›ç‰ˆ1688å‘é€æŒ‰é’®é«˜äº®...'); const styles = { sendButton: 'border: 5px solid red !important; background: rgba(255, 0, 0, 0.4) !important; box-shadow: 0 0 25px rgba(255, 0, 0, 1) !important; z-index: 10000 !important; position: relative !important; transform: scale(1.05) !important;', inputBox: 'border: 4px solid blue !important; background: rgba(0, 100, 255, 0.3) !important; box-shadow: 0 0 20px rgba(0, 100, 255, 0.8) !important; z-index: 9999 !important; position: relative !important;', container: 'border: 3px solid green !important; background: rgba(0, 255, 0, 0.2) !important; box-shadow: 0 0 15px rgba(0, 255, 0, 0.6) !important; z-index: 9998 !important; position: relative !important;' }; let highlightedCount = 0; document.querySelectorAll('button[style*=\"background-color\"]').forEach((el, index) => { const style = el.getAttribute('style') || ''; if (style.includes('rgb(0, 115, 255)') || style.includes('rgb(0,115,255)')) { el.style.cssText += styles.sendButton; el.setAttribute('data-improved-highlight', 'blue-send-' + index); highlightedCount++; console.log('ğŸ“¤ é«˜äº®è“è‰²å‘é€æŒ‰é’®:', el.className || '(æ— ç±»å)', el.textContent.trim().substring(0, 20)); } }); document.querySelectorAll('button[class*=\"insight\"], [class*=\"Insight\"]').forEach((el, index) => { if (!el.hasAttribute('data-improved-highlight')) { el.style.cssText += styles.sendButton; el.setAttribute('data-improved-highlight', 'insight-' + index); highlightedCount++; console.log('ğŸ“¤ é«˜äº®InsightæŒ‰é’®:', el.className); } }); document.querySelectorAll('textarea').forEach((el, index) => { el.style.cssText += styles.inputBox; el.setAttribute('data-improved-highlight', 'textarea-' + index); highlightedCount++; console.log('ğŸ“ é«˜äº®è¾“å…¥æ¡†:', el.className || '(æ— ç±»å)'); }); document.querySelectorAll('[class*=\"message\"], [class*=\"chat\"], [class*=\"im\"]').forEach((el, index) => { const rect = el.getBoundingClientRect(); if (rect.width > 100 && rect.height > 50) { el.style.cssText += styles.container; el.setAttribute('data-improved-highlight', 'container-' + index); highlightedCount++; console.log('ğŸ’¬ é«˜äº®å®¹å™¨:', el.className); } }); document.querySelectorAll('button, [role=\"button\"], span, div').forEach((el, index) => { if (!el.hasAttribute('data-improved-highlight')) { const text = el.textContent.trim(); if (text.includes('å‘é€') || text.includes('Send')) { el.style.cssText += styles.sendButton; el.setAttribute('data-improved-highlight', 'text-send-' + index); highlightedCount++; console.log('ğŸ“¤ é«˜äº®æ–‡æœ¬å‘é€æŒ‰é’®:', text); } } }); console.log(`\\nğŸ¯ æ”¹è¿›ç‰ˆé«˜äº®å®Œæˆï¼æ€»å…±é«˜äº®äº† ${highlightedCount} ä¸ªå…ƒç´ `); const infoBox = document.createElement('div'); infoBox.style.cssText = `position: fixed !important; top: 20px !important; right: 20px !important; background: rgba(0, 0, 0, 0.9) !important; color: white !important; padding: 15px !important; border-radius: 8px !important; z-index: 10001 !important; font-size: 14px !important; max-width: 300px !important; font-family: Arial, sans-serif !important;`; infoBox.innerHTML = `<h4 style=\"margin: 0 0 10px 0 !important;\">ğŸ¨ 1688å…ƒç´ é«˜äº®</h4><p style=\"margin: 5px 0 !important;\">ğŸ“¤ çº¢è‰²: å‘é€æŒ‰é’®</p><p style=\"margin: 5px 0 !important;\">ğŸ“ è“è‰²: è¾“å…¥æ¡†</p><p style=\"margin: 5px 0 !important;\">ğŸ’¬ ç»¿è‰²: æ¶ˆæ¯å®¹å™¨</p><p style=\"margin: 10px 0 5px 0 !important;\">æ€»è®¡: ${highlightedCount} ä¸ªå…ƒç´ </p><small style=\"color: #ccc !important;\">5ç§’åè‡ªåŠ¨æ¶ˆå¤±</small>`; document.body.appendChild(infoBox); setTimeout(() => { if (infoBox.parentNode) { infoBox.parentNode.removeChild(infoBox); } }, 5000); return { success: true, highlightedCount: highlightedCount, timestamp: new Date().toISOString() };",
        "waitForResult": true
      },
      "next": ["save_result"]
    },
    {
      "id": "save_result",
      "type": "ResultSaverNode",
      "name": "ä¿å­˜é«˜äº®ç»“æœ",
      "config": {
        "outputDir": "archive/workflow-records",
        "filenameTemplate": "1688-improved-highlight-result-{timestamp}.json",
        "includeMetadata": true
      },
      "next": ["end"]
    },
    {
      "id": "end",
      "type": "EndNode",
      "name": "ç»“æŸ",
      "config": { "cleanup": false, "saveLogs": true }
    }
  ],
  "globalConfig": {
    "logLevel": "info",
    "screenshotOnError": true,
    "autoCleanup": false,
    "parallelExecution": false,
    "timeout": 600000
  }
}