{
  "name": "1688 Login Preflow (No Cookie Load)",
  "description": "不加载Cookie，直接导航并等待人工登录（10分钟内每10s检测），成功后保存Cookie并记录握手结果",
  "version": "1.0.0",
  "author": "WebAuto Team",
  "nodes": [
    { "id": "start", "type": "StartNode", "name": "开始", "next": ["browser_init"] },
    { "id": "browser_init", "type": "BrowserInitNode", "name": "浏览器初始化", "config": { "engine": "camoufox", "headless": false, "viewport": { "width": 1280, "height": 900 } }, "next": ["navigate_home"] },
    { "id": "navigate_home", "type": "NavigationNode", "name": "导航到主页", "config": { "url": "https://www.1688.com/", "waitUntil": "domcontentloaded", "timeout": 30000 }, "next": ["verify_login"] },
    { "id": "verify_login", "type": "LoginVerificationNode", "name": "人工登录等待", "config": { "loginSelector": ".userAvatarLogo img", "maxRetries": 60, "retryDelay": 10000 }, "next": ["save_cookies"], "error": ["handshake_failed"] },
    { "id": "save_cookies", "type": "CookieSaverNode", "name": "保存Cookie", "config": { "cookiePath": "~/.webauto/cookies/1688-domestic.json" }, "next": ["handshake_success"] },
    { "id": "handshake_success", "type": "ResultSaverNode", "name": "握手成功记录", "config": { "outputDir": "workflows/records", "filenameTemplate": "preflow-1688-login-success-{timestamp}.json", "includeMetadata": true }, "next": ["end"] },
    { "id": "handshake_failed", "type": "ResultSaverNode", "name": "握手失败记录", "config": { "outputDir": "workflows/records", "filenameTemplate": "preflow-1688-login-failed-{timestamp}.json", "includeMetadata": true }, "next": ["halt"] },
    { "id": "halt", "type": "HaltNode", "name": "停止", "config": { "message": "前置登录流程失败（未在时限内完成登录）" } },
    { "id": "end", "type": "EndNode", "name": "结束", "config": { "cleanup": false, "saveLogs": true, "persistSession": true } }
  ],
  "globalConfig": { "logLevel": "info", "screenshotOnError": true, "autoCleanup": true, "parallelExecution": false, "timeout": 660000 }
}
