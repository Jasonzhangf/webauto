{
  "name": "Weibo Content Download Workflow",
  "description": "微博内容批量下载工作流",
  "version": "1.0.0",
  "author": "WebAuto Team",
  "parameters": {
    "inputFile": {
      "type": "string",
      "required": true,
      "description": "输入的链接文件路径"
    },
    "downloadDir": {
      "type": "string",
      "required": false,
      "description": "下载内容保存目录",
      "default": "~/.webauto/weibo/downloads"
    }
  },
  "nodes": [
    {
      "id": "start",
      "type": "StartNode",
      "name": "开始节点",
      "position": {
        "x": 100,
        "y": 100
      },
      "next": [
        "browser_init"
      ]
    },
    {
      "id": "browser_init",
      "type": "BrowserInitNode",
      "name": "浏览器初始化",
      "config": {
        "headless": true,
        "viewport": {
          "width": 1920,
          "height": 1080
        },
        "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
      },
      "position": {
        "x": 300,
        "y": 100
      },
      "next": [
        "load_cookies"
      ]
    },
    {
      "id": "load_cookies",
      "type": "CookieLoaderNode",
      "name": "加载Cookie",
      "config": {
        "cookiePath": "./cookies/weibo-cookies.json"
      },
      "position": {
        "x": 500,
        "y": 100
      },
      "next": [
        "read_links"
      ]
    },
    {
      "id": "read_links",
      "type": "FileReaderNode",
      "name": "读取链接文件",
      "config": {
        "encoding": "utf8"
      },
      "position": {
        "x": 700,
        "y": 100
      },
      "next": [
        "download_content"
      ]
    },
    {
      "id": "download_content",
      "type": "ContentDownloadNode",
      "name": "下载内容",
      "config": {
        "batchSize": 5,
        "delayBetweenBatches": 3000,
        "timeout": 30000,
        "retryAttempts": 3,
        "selectors": {
          "postContent": "[class*=\"detail_wbtext_\"], [class*=\"txt_\"], [class*=\"content_\"], .woo-box-flex:first-child",
          "images": "[class*=\"media_toSmall_\"] img, [class*=\"media_box_\"] img",
          "videos": "[class*=\"Video_\"], [class*=\"video_\"], video",
          "timestamp": "[class*=\"head-info_\"], [class*=\"time_\"], [class*=\"date_\"]"
        }
      },
      "position": {
        "x": 900,
        "y": 100
      },
      "next": [
        "save_results"
      ]
    },
    {
      "id": "save_results",
      "type": "DownloadResultSaverNode",
      "name": "保存下载结果",
      "config": {
        "outputDir": "~/.webauto/weibo/downloads",
        "filenameTemplate": "weibo-content-{timestamp}.json",
        "includeMetadata": true
      },
      "position": {
        "x": 1100,
        "y": 100
      },
      "next": [
        "end"
      ]
    },
    {
      "id": "end",
      "type": "EndNode",
      "name": "结束节点",
      "config": {
        "cleanup": true,
        "saveLogs": true
      },
      "position": {
        "x": 1300,
        "y": 100
      }
    }
  ],
  "globalConfig": {
    "logLevel": "info",
    "screenshotOnError": true,
    "autoCleanup": true,
    "parallelExecution": false,
    "timeout": 600000
  },
  "variables": {
    "downloadedContent": [],
    "downloadCount": 0,
    "successCount": 0,
    "failedCount": 0,
    "startTime": null,
    "endTime": null
  }
}