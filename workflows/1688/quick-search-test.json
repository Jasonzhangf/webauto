{
  "name": "快速搜索测试",
  "description": "快速测试1688搜索功能",
  "version": "1.0.0",
  "anchor": {
    "hostFilter": "1688.com",
    "selectors": [".userAvatarLogo img", "img[alt*='用户']"],
    "requireVisible": true,
    "maxWaitMs": 30000,
    "pollIntervalMs": 1500,
    "highlight": true,
    "persistHighlight": true,
    "highlightLabel": "ANCHOR",
    "highlightColor": "#007AFF"
  },
  "nodes": [
    {
      "id": "start",
      "type": "StartNode",
      "next": ["navigate_search"]
    },
    {
      "id": "navigate_search",
      "type": "NavigationNode",
      "config": {
        "hostFilter": "1688.com",
        "url": "https://s.1688.com/sell/search.htm?keywords=冲锋衣",
        "waitUntil": "networkidle",
        "timeout": 15000
      },
      "next": ["search_results_anchor"]
    },
    {
      "id": "search_results_anchor",
      "type": "AnchorPointNode",
      "config": {
        "hostFilter": "1688.com",
        "selectors": [".sm-offer-card", ".offer-card", ".product-card", ".sm-offer-item"],
        "requireVisible": true,
        "maxWaitMs": 15000,
        "pollIntervalMs": 1000,
        "highlight": true,
        "persistHighlight": true,
        "highlightLabel": "SEARCH_RESULTS",
        "highlightColor": "#007AFF"
      },
      "next": ["analyze_products"]
    },
    {
      "id": "analyze_products",
      "type": "JavaScriptExecutionNode",
      "config": {
        "script": "// 分析商品卡片和旺旺链接\nconsole.log('=== 分析商品和旺旺链接 ===');\n\nconst cards = document.querySelectorAll('.sm-offer-card, .offer-card, .product-card, .sm-offer-item');\nconsole.log('找到商品卡片数量:', cards.length);\n\nconst merchantInfo = [];\ncards.forEach((card, index) => {\n  const info = { index };\n  \n  // 查找旺旺链接\n  const wwLink = card.querySelector('a[href*=\"air.1688.com\"], .ww-link, .wangwang-link, [data-trace=\"ww\"]');\n  if (wwLink) {\n    info.wwLink = wwLink.href;\n    info.wwText = wwLink.textContent.trim();\n  }\n  \n  // 查找商家名称\n  const nameEl = card.querySelector('.company-name, .shop-name, .merchant-name, [data-spm-anchor-id*=\"company\"]');\n  if (nameEl) {\n    info.name = nameEl.textContent.trim();\n  }\n  \n  // 查找商品标题\n  const titleEl = card.querySelector('.product-title, .offer-title, a[title], [data-spm-anchor-id*=\"title\"]');\n  if (titleEl) {\n    info.title = titleEl.textContent.trim() || titleEl.getAttribute('title');\n  }\n  \n  merchantInfo.push(info);\n});\n\nconsole.log('商家信息:', merchantInfo);\n\n// 返回前两个商家的信息\nreturn {\n  totalCards: cards.length,\n  merchants: merchantInfo.slice(0, 3)\n};"
      },
      "next": ["check_second_ww"]
    },
    {
      "id": "check_second_ww",
      "type": "JavaScriptExecutionNode",
      "config": {
        "script": "// 检查第二个旺旺链接\nconsole.log('=== 检查第二个旺旺链接 ===');\n\nconst cards = document.querySelectorAll('.sm-offer-card, .offer-card, .product-card, .sm-offer-item');\n\nif (cards.length >= 2) {\n  const secondCard = cards[1];\n  const wwLink = secondCard.querySelector('a[href*=\"air.1688.com\"], .ww-link, .wangwang-link, [data-trace=\"ww\"]');\n  \n  if (wwLink) {\n    console.log('找到第二个旺旺链接:', wwLink.href);\n    \n    // 高亮第二个旺旺链接\n    wwLink.style.setProperty('outline', '3px solid #34c759', 'important');\n    wwLink.style.setProperty('background', 'rgba(52, 199, 89, 0.2)', 'important');\n    \n    // 存储到全局变量\n    window.__secondWangwangLink = wwLink.href;\n    window.__secondWangwangElement = wwLink;\n    \n    return { \n      found: true, \n      href: wwLink.href,\n      text: wwLink.textContent.trim()\n    };\n  } else {\n    console.log('第二个商品卡片中没有找到旺旺链接');\n  }\n} else {\n  console.log('商品卡片数量不足2个，当前数量:', cards.length);\n}\n\nreturn { found: false };"
      },
      "next": ["wait_before_click"]
    },
    {
      "id": "wait_before_click",
      "type": "WaitNode",
      "config": {
        "duration": 2000
      },
      "next": ["end"]
    },
    {
      "id": "end",
      "type": "EndNode",
      "config": {
        "cleanupHighlights": true,
        "persistSession": false
      }
    }
  ]
}