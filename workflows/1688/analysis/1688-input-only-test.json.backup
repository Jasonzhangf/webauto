{
  "name": "1688 Input Only Test",
  "description": "åªæµ‹è¯•1688èŠå¤©ç•Œé¢çš„è¾“å…¥æ¡†ï¼Œè·³è¿‡å‘é€æŒ‰é’®å®šä½",
  "version": "1.0.0",
  "nodes": [
    { "id": "start", "type": "StartNode", "name": "å¼€å§‹", "next": ["attach"] },
    { "id": "attach", "type": "AttachSessionNode", "name": "ä¼šè¯æ¥åŠ›", "config": {}, "next": ["navigate_search"] },
    {
      "id": "navigate_search",
      "type": "NavigationNode",
      "name": "å¯¼èˆªåˆ°æœç´¢é¡µé¢",
      "config": {
        "url": "https://s.1688.com/selloffer/offer_search.htm?keywords=%B9%A4%D2%B5%B4%F3%B7%E7%C9%C8&spm=a260k.home2025.searchbox.0",
        "waitUntil": "domcontentloaded",
        "timeout": 30000
      },
      "next": ["wait_search"]
    },
    { "id": "wait_search", "type": "WaitNode", "name": "æœç´¢é¡µé¢ç­‰å¾…", "config": { "minMs": 2000, "maxMs": 3000 }, "next": ["dismiss_modals"] },
    { "id": "dismiss_modals", "type": "ModalDismissNode", "name": "å…³é—­æœç´¢é¡µæ¨¡æ€", "config": { "maxAttempts": 4, "retryDelay": 500 }, "next": ["open_chat"] },
    {
      "id": "open_chat",
      "type": "PopupTokenCaptureNode",
      "name": "æ‰“å¼€èŠå¤©çª—å£",
      "config": {
        "containerSelector": ".space-pc-ui2024-content > div:nth-child(5)",
        "clickSelectors": ["a.ww-link.ww-inline", "span.J_WangWang a.ww-link", "a[href*=air.1688.com/app/]"],
        "hostFilter": "air.1688.com",
        "maxItems": 1,
        "minClickDelay": 500,
        "maxClickDelay": 1500,
        "afterPopupWaitMs": 2000,
        "closePopup": false,
        "popupClickSelectors": ["body > div:nth-child(23)"],
        "dryMode": false,
        "enforceWebPreference": true,
        "popupStepGate": true,
        "gateTitle": "èŠå¤©çª—å£ç¡®è®¤",
        "gateMessage": "è¯·ç¡®è®¤èŠå¤©çª—å£å·²å®Œå…¨åŠ è½½ï¼Œç„¶åç‚¹å‡»ä¸‹ä¸€æ­¥"
      },
      "next": ["test_input_only"]
    },
    {
      "id": "test_input_only",
      "type": "GateOverlayNode",
      "name": "ä»…æµ‹è¯•è¾“å…¥æ¡†",
      "config": {
        "hostFilter": "air.1688.com",
        "title": "ğŸ” è¾“å…¥æ¡†å®šä½æµ‹è¯•",
        "message": "è¯·æ‰‹åŠ¨æ£€æŸ¥èŠå¤©ç•Œé¢ä¸­çš„è¾“å…¥å…ƒç´ ï¼š\n\nğŸ“ è¯·å¯»æ‰¾ä»¥ä¸‹ç±»å‹çš„è¾“å…¥æ¡†ï¼š\n1. textareaå…ƒç´ \n2. contenteditableçš„div\n3. input[type='text']\n4. ä»»ä½•å¯ç¼–è¾‘çš„åŒºåŸŸ\n\nğŸ” ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·(F12)æ£€æŸ¥ï¼š\n- Console: document.querySelectorAll('textarea, [contenteditable], input[type=\"text\"]')\n- æŸ¥çœ‹å“ªäº›å…ƒç´ å¯è§å¹¶å¯ç¼–è¾‘\n\nâ° ç­‰å¾…æ‚¨æ£€æŸ¥å®Œæˆåï¼Œç‚¹å‡»'ä¸‹ä¸€æ­¥'",
        "stepGate": true,
        "block": true
      },
      "next": ["manual_element_check"]
    },
    {
      "id": "manual_element_check",
      "type": "GateOverlayNode",
      "name": "æ‰‹åŠ¨å…ƒç´ æ£€æŸ¥æŒ‡å¯¼",
      "config": {
        "hostFilter": "air.1688.com",
        "title": "ğŸ› ï¸ æ‰‹åŠ¨æ£€æŸ¥æŒ‡å¯¼",
        "message": "ç°åœ¨è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ£€æŸ¥ï¼š\n\n1ï¸âƒ£ åœ¨èŠå¤©ç•Œé¢æŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·\n2ï¸âƒ£ åœ¨Consoleä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\n\n// æŸ¥æ‰¾æ‰€æœ‰å¯èƒ½çš„è¾“å…¥å…ƒç´ \ndocument.querySelectorAll('textarea, [contenteditable], input[type=\"text\"], input')\n.forEach(el => console.log(el, el.getBoundingClientRect()));\n\n// æŸ¥æ‰¾æ‰€æœ‰å¯èƒ½çš„å‘é€æŒ‰é’®\ndocument.querySelectorAll('button, [role=\"button\"], a')\n.forEach(el => { const text = el.innerText; if (text.includes('å‘é€') || text.includes('Send')) console.log('SENDæŒ‰é’®:', el, text); });\n\n3ï¸âƒ£ è®°å½•æœ‰æ•ˆçš„é€‰æ‹©å™¨\n4ï¸âƒ£ ç‚¹å‡»'ä¸‹ä¸€æ­¥'ç»“æŸæµ‹è¯•",
        "stepGate": true,
        "block": true
      },
      "next": ["save_results"]
    },
    {
      "id": "save_results",
      "type": "ResultSaverNode",
      "name": "ä¿å­˜æµ‹è¯•ç»“æœ",
      "config": {
        "outputDir": "workflows/records",
        "filenameTemplate": "1688-input-only-test-{timestamp}.json",
        "includeMetadata": true
      },
      "next": ["end"]
    },
    {
      "id": "end",
      "type": "EndNode",
      "name": "ç»“æŸ",
      "config": { "cleanup": false, "saveLogs": true }
    }
  ],
  "globalConfig": {
    "logLevel": "info",
    "screenshotOnError": true,
    "autoCleanup": false,
    "parallelExecution": false,
    "timeout": 600000
  }
}