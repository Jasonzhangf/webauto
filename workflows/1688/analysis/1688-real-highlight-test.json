{
  "name": "1688çœŸå®é¡µé¢é«˜äº®æµ‹è¯•",
  "description": "ä½¿ç”¨èƒ½å¤Ÿå®é™…æ“ä½œé¡µé¢çš„èŠ‚ç‚¹è¿›è¡Œé«˜äº®æµ‹è¯•",
  "version": "1.0.0",
  "preflows": ["1688-login-preflow"],
  "nodes": [
    { "id": "start", "type": "StartNode", "name": "å¼€å§‹", "next": ["attach"] },
    {
      "id": "attach",
      "type": "AttachSessionNode",
      "name": "ä¼šè¯æ¥åŠ›",
      "config": {},
      "next": ["navigate_search"]
    },
    {
      "id": "navigate_search",
      "type": "NavigationNode",
      "name": "å¯¼èˆªåˆ°æœç´¢ç»“æœé¡µ",
      "config": {
        "url": "https://s.1688.com/selloffer/offer_search.htm?keywords=%B7%FE%D7%B0",
        "waitUntil": "domcontentloaded",
        "timeout": 30000
      },
      "next": ["wait_search"]
    },
    {
      "id": "wait_search",
      "type": "WaitNode",
      "name": "ç­‰å¾…æœç´¢ç»“æœå®Œå…¨åŠ è½½",
      "config": { "minMs": 5000, "maxMs": 8000 },
      "next": ["execute_highlight_script"]
    },
    {
      "id": "execute_highlight_script",
      "type": "PageActionNode",
      "name": "æ‰§è¡Œé«˜äº®è„šæœ¬",
      "config": {
        "action": "execute_script",
        "script": "// ä¿®æ”¹é¡µé¢èƒŒæ™¯è‰²ä¸ºé»„è‰²\ndocument.body.style.backgroundColor = 'rgba(255, 255, 0, 0.3)';\n\n// æ·»åŠ é¡¶éƒ¨æç¤ºæ¡\nconst topBanner = document.createElement('div');\ntopBanner.innerHTML = '<h1 style=\"background:red;color:white;padding:15px;font-size:24px;position:fixed;top:0;left:0;width:100%;z-index:999999999;text-align:center;\">ğŸ”¥ é«˜äº®æµ‹è¯•æ­£åœ¨è¿è¡Œ ğŸ”¥</h1>';\ndocument.body.appendChild(topBanner);\n\n// é«˜äº®å•†å®¶å®¹å™¨\nconst merchantSelectors = ['.sm-offer-item', '.offer-item', '.sm-offer', '[class*=offer]'];\nlet merchantCount = 0;\nmerchantSelectors.forEach(selector => {\n  const elements = document.querySelectorAll(selector);\n  elements.forEach((el, index) => {\n    if (index < 8) {\n      el.style.setProperty('border', '4px solid red', 'important');\n      el.style.setProperty('background-color', 'rgba(255, 0, 0, 0.2)', 'important');\n      el.style.setProperty('box-shadow', '0 0 10px red', 'important');\n      el.style.setProperty('z-index', '999998', 'important');\n      \n      // æ·»åŠ æ ‡è®°\n      const marker = document.createElement('div');\n      marker.textContent = `å•†å®¶${++merchantCount}`;\n      marker.style.cssText = 'position:absolute;top:0;left:0;background:yellow;color:red;font-weight:bold;padding:2px;z-index:999999;font-size:12px;border:1px solid red;';\n      el.style.position = 'relative';\n      el.appendChild(marker);\n    }\n  });\n});\n\n// é«˜äº®æ—ºæ—ºè”ç³»æ–¹å¼\nconst contactSelectors = ['[class*=contact]', '[class*=chat]', '[class*=im]', '[class*=æ—ºæ—º]', '.sm-im', '.s-im'];\nlet contactCount = 0;\ncontactSelectors.forEach(selector => {\n  const elements = document.querySelectorAll(selector);\n  elements.forEach((el, index) => {\n    if (index < 15) {\n      el.style.setProperty('border', '3px solid blue', 'important');\n      el.style.setProperty('background-color', 'rgba(0, 0, 255, 0.3)', 'important');\n      el.style.setProperty('box-shadow', '0 0 8px blue', 'important');\n      el.style.setProperty('z-index', '999999', 'important');\n      \n      // æ·»åŠ æ ‡è®°\n      const marker = document.createElement('div');\n      marker.textContent = `æ—ºæ—º${++contactCount}`;\n      marker.style.cssText = 'position:absolute;top:0;right:0;background:cyan;color:blue;font-weight:bold;padding:2px;z-index:1000000;font-size:10px;border:1px solid blue;';\n      el.style.position = 'relative';\n      el.appendChild(marker);\n    }\n  });\n});\n\n// æ·»åŠ ç»Ÿè®¡ä¿¡æ¯\nconst statsDiv = document.createElement('div');\nstatsDiv.innerHTML = `<div style=\"background:black;color:white;padding:10px;position:fixed;bottom:0;left:0;width:100%;z-index:999999999;font-size:16px;text-align:center;\">âœ… æ‰¾åˆ°å•†å®¶å®¹å™¨: ${merchantCount} ä¸ª, æ—ºæ—ºè”ç³»: ${contactCount} ä¸ª - é«˜äº®æ•ˆæœåº”è¯¥å¾ˆæ˜æ˜¾</div>`;\ndocument.body.appendChild(statsDiv);\n\nconsole.log(`é«˜äº®å®Œæˆ: ${merchantCount} ä¸ªå•†å®¶å®¹å™¨, ${contactCount} ä¸ªæ—ºæ—ºè”ç³»`);"
      },
      "next": ["wait_for_observation"]
    },
    {
      "id": "wait_for_observation",
      "type": "WaitNode",
      "name": "ç­‰å¾…è§‚å¯Ÿé«˜äº®æ•ˆæœ",
      "config": { "minMs": 30000, "maxMs": 35000 },
      "next": ["end"]
    },
    {
      "id": "end",
      "type": "EndNode",
      "name": "ç»“æŸæµ‹è¯•ï¼ˆä¿æŒé¡µé¢æ‰“å¼€ï¼‰",
      "config": { "cleanup": false, "saveLogs": true }
    }
  ],
  "globalConfig": {
    "logLevel": "info",
    "screenshotOnError": true,
    "autoCleanup": false,
    "parallelExecution": false,
    "timeout": 300000
  }
}