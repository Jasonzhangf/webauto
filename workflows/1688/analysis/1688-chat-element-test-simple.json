{
  "name": "1688 Chat Element Test Simple",
  "description": "ç®€å•æµ‹è¯•1688èŠå¤©ç•Œé¢å…ƒç´ å®šä½ï¼Œä½¿ç”¨ç°æœ‰ChatComposeNodeåŠŸèƒ½",
  "version": "1.0.0",
  "nodes": [
    { "id": "start", "type": "StartNode", "name": "å¼€å§‹", "next": ["attach"] },
    { "id": "attach", "type": "AttachSessionNode", "name": "ä¼šè¯æ¥åŠ›", "config": {}, "next": ["navigate_search"] },
    {
      "id": "navigate_search",
      "type": "NavigationNode",
      "name": "å¯¼èˆªåˆ°æœç´¢é¡µé¢",
      "config": {
        "url": "https://s.1688.com/selloffer/offer_search.htm?keywords=%B9%A4%D2%B5%B4%F3%B7%E7%C9%C8&spm=a260k.home2025.searchbox.0",
        "waitUntil": "domcontentloaded",
        "timeout": 30000
      },
      "next": ["wait_search"]
    },
    { "id": "wait_search", "type": "WaitNode", "name": "æœç´¢é¡µé¢ç­‰å¾…", "config": { "minMs": 2000, "maxMs": 3000 }, "next": ["dismiss_modals"] },
    { "id": "dismiss_modals", "type": "ModalDismissNode", "name": "å…³é—­æœç´¢é¡µæ¨¡æ€", "config": { "maxAttempts": 4, "retryDelay": 500 }, "next": ["open_chat"] },
    {
      "id": "open_chat",
      "type": "PopupTokenCaptureNode",
      "name": "æ‰“å¼€èŠå¤©çª—å£",
      "config": {
        "containerSelector": ".space-pc-ui2024-content > div:nth-child(5)",
        "clickSelectors": ["a.ww-link.ww-inline", "span.J_WangWang a.ww-link", "a[href*=air.1688.com/app/]"],
        "hostFilter": "air.1688.com",
        "maxItems": 1,
        "minClickDelay": 500,
        "maxClickDelay": 1500,
        "afterPopupWaitMs": 2000,
        "closePopup": false,
        "popupClickSelectors": ["body > div:nth-child(23)"],
        "dryMode": false,
        "enforceWebPreference": true,
        "popupStepGate": false
      },
      "next": ["test_input_elements"]
    },
    {
      "id": "test_input_elements",
      "type": "ChatComposeNode",
      "name": "æµ‹è¯•è¾“å…¥æ¡†å’Œå‘é€æŒ‰é’®",
      "config": {
        "hostFilter": "air.1688.com",
        "message": "ğŸ”æµ‹è¯•æ¶ˆæ¯ - è¿™æ˜¯ä¸ºäº†å®šä½è¾“å…¥æ¡†å’Œå‘é€æŒ‰é’®",
        "stepGate": true,
        "send": false,
        "inputSelectors": [
          "textarea",
          "div[contenteditable='true']",
          "div[contenteditable]",
          "input[type='text']",
          ".im-chat-input",
          ".msg-input",
          ".chat-input",
          ".message-input",
          ".input-area",
          ".editor-content",
          ".rich-editor",
          ".chat-editor",
          "[class*='input']",
          "[class*='editor']"
        ],
        "sendSelectors": [
          "button:has-text('å‘é€')",
          ".send-btn",
          ".btn-send",
          ".im-chat-send-btn",
          ".chat-send-btn",
          "[class*='send']",
          "[class*='Send']",
          "button",
          "input[type='button']",
          "input[type='submit']",
          ".chat-send",
          ".msg-send",
          "button[class*='primary']"
        ],
        "highlightMs": 10000,
        "gateTitle": "ğŸ” èŠå¤©å…ƒç´ å®šä½æµ‹è¯•",
        "gateMessage": "è¯·æŸ¥çœ‹èŠå¤©ç•Œé¢ï¼š\n1. âœ… å¦‚æœè¾“å…¥æ¡†å†…æœ‰æ–‡å­—ï¼Œè¯´æ˜è¾“å…¥æ¡†å®šä½æˆåŠŸ\n2. ğŸ”´ å¦‚æœå‘é€æŒ‰é’®æœ‰çº¢è‰²è¾¹æ¡†ï¼Œè¯´æ˜å‘é€æŒ‰é’®å®šä½æˆåŠŸ\n3. ğŸ“¸ è¯·æˆªå›¾ä¿å­˜ç»“æœ\n4. ç‚¹å‡»'ä¸‹ä¸€æ­¥'ç»§ç»­æµ‹è¯•"
      },
      "next": ["test_send_highlight_only"]
    },
    {
      "id": "test_send_highlight_only",
      "type": "ChatComposeNode",
      "name": "ä»…æµ‹è¯•å‘é€æŒ‰é’®é«˜äº®",
      "config": {
        "hostFilter": "air.1688.com",
        "message": "ğŸ¯ ä»…æµ‹è¯•å‘é€æŒ‰é’®å®šä½",
        "stepGate": true,
        "send": false,
        "inputSelectors": ["textarea"],
        "sendSelectors": [
          "button:has-text('å‘é€')",
          ".send-btn",
          ".btn-send",
          ".im-chat-send-btn",
          ".chat-send-btn",
          "[class*='send']",
          "[class*='Send']",
          "button[class*='primary']",
          ".chat-send",
          ".msg-send"
        ],
        "highlightMs": 15000,
        "gateTitle": "ğŸ¯ å‘é€æŒ‰é’®å®šä½æµ‹è¯•",
        "gateMessage": "è¯·æŸ¥çœ‹å‘é€æŒ‰é’®ï¼š\nğŸ”´ çº¢è‰²è¾¹æ¡†çš„å…ƒç´ å°±æ˜¯ç³»ç»Ÿæ‰¾åˆ°çš„å‘é€æŒ‰é’®\nğŸ“¸ è¯·æˆªå›¾ä¿å­˜ï¼Œè®°å½•é€‰æ‹©å™¨\nâš ï¸  æ³¨æ„ï¼šä¸è¦ç‚¹å‡»'ä¸‹ä¸€æ­¥'å‘é€æ¶ˆæ¯ï¼Œåªè§‚å¯ŸæŒ‰é’®é«˜äº®\nâœ… ç¡®è®¤åç‚¹å‡»'ä¸‹ä¸€æ­¥'å®Œæˆæµ‹è¯•"
      },
      "next": ["final_info"]
    },
    {
      "id": "final_info",
      "type": "GateOverlayNode",
      "name": "æ˜¾ç¤ºæ€»ç»“ä¿¡æ¯",
      "config": {
        "hostFilter": "air.1688.com",
        "title": "âœ… å…ƒç´ å®šä½æµ‹è¯•å®Œæˆ",
        "message": "æµ‹è¯•å®Œæˆï¼ç°åœ¨è¯·è®°å½•ä»¥ä¸‹ä¿¡æ¯ï¼š\n\nğŸ“ è¾“å…¥æ¡†ä¿¡æ¯ï¼š\n- æ˜¯å¦æˆåŠŸè¾“å…¥æ–‡å­—ï¼Ÿ\n- è¾“å…¥æ¡†çš„ç±»å‹ï¼ˆtextarea/contenteditable/inputï¼‰\n\nğŸ¯ å‘é€æŒ‰é’®ä¿¡æ¯ï¼š\n- æ˜¯å¦çœ‹åˆ°çº¢è‰²é«˜äº®çš„å‘é€æŒ‰é’®ï¼Ÿ\n- æŒ‰é’®çš„ä½ç½®å’Œæ ·å¼\n\nğŸ’¡ è¿™äº›ä¿¡æ¯å°†ç”¨äºä¼˜åŒ–ChatComposeNodeé…ç½®ã€‚\n\nç‚¹å‡»'ä¸‹ä¸€æ­¥'ç»“æŸæµ‹è¯•ã€‚",
        "stepGate": true,
        "block": true
      },
      "next": ["save_results"]
    },
    {
      "id": "save_results",
      "type": "ResultSaverNode",
      "name": "ä¿å­˜æµ‹è¯•ç»“æœ",
      "config": {
        "outputDir": "workflows/records",
        "filenameTemplate": "1688-chat-element-test-simple-{timestamp}.json",
        "includeMetadata": true
      },
      "next": ["end"]
    },
    {
      "id": "end",
      "type": "EndNode",
      "name": "ç»“æŸ",
      "config": { "cleanup": false, "saveLogs": true }
    }
  ],
  "globalConfig": {
    "logLevel": "info",
    "screenshotOnError": true,
    "autoCleanup": false,
    "parallelExecution": false,
    "timeout": 600000
  }
}