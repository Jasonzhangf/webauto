# Codex apply_patch 工具验证测试

## 目标
验证 Codex 的 apply_patch 函数能够正确处理各种代码修改场景

## 测试方法
我会按顺序执行以下测试，每个测试会：
1. 准备测试文件
2. 调用 apply_patch
3. 验证结果
4. 报告状态

## 测试序列

### ✓ 准备工作
- 创建测试目录: tests/patch_verification/temp_test_files/

### TEST-01: 创建新文件
- 创建空白文件并添加3行内容
- 验证点: 文件被创建且内容正确

### TEST-02: 简单单行替换
- 原始: "hello world"
- 替换为: "goodbye world"
- 验证点: 内容被正确替换

### TEST-03: 多行替换
- 替换连续3行内容
- 验证点: 多行替换准确，前后行不受影响

### TEST-04: 函数内容替换
- 替换整个 TypeScript 函数实现
- 验证点: 函数体被完整替换，语法正确

### TEST-05: 添加 import 语句
- 在现有 import 后添加新的 import
- 验证点: 新 import 插入位置正确

### TEST-06: 特殊字符处理
- 包含路径、引号、反斜杠的内容
- 验证点: 特殊字符不被破坏

### TEST-07: 缩进保持
- 修改带缩进的代码
- 验证点: 缩进格式保持一致

### TEST-08: 错误处理 - 文件不存在
- 尝试修改不存在的文件
- 验证点: 返回清晰错误信息

### TEST-09: 错误处理 - 内容不匹配
- 尝试替换不存在的内容
- 验证点: 返回清晰错误信息

### ✓ 清理工作
- 删除测试目录

## 执行方式
我将逐个执行这些测试，实时报告结果。

